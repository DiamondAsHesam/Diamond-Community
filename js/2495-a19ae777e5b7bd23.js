(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2495],{14693:function(e,t,r){"use strict";r.d(t,{V:function(){return c}});var n=r(9579);r(82933);var s=r(74486),a=r(89895),i=r(15780),l=r(92632);function o(e){let{actions:t,toolCallId:r}=e,s=(0,i.a5)(t);return s?(0,n.jsx)(l.B,{action:s,toolCallId:r}):(0,n.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>(0,n.jsxs)("div",{className:"space-y-4",children:["none"!==e.ui.component&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.J,{className:"text-primary size-5 shrink-0",weight:"bold"}),(0,n.jsx)("p",{children:e.displayText})]}),(0,n.jsx)(l.B,{action:e,toolCallId:r})]},e.id||t))})}function c(e){var t;let{message:r}=e;return"tool"===r.role&&r.tool?(0,n.jsxs)("div",{children:[(0,n.jsx)(o,{actions:null!==(t=r.tool.actions)&&void 0!==t?t:[],toolCallId:r.tool.id},r.id),"in_progress"===r.tool.status&&(0,n.jsx)(s.$,{weight:"thin",size:"sm",className:"mt-4"})]}):null}r(73684)},73684:function(e,t,r){"use strict";r.r(t),r.d(t,{MessageCard:function(){return D}});var n=r(9579),s=r(82933),a=r(76102),i=r(81677),l=r(17386),o=r(72386),c=r(51286),d=r(11274),u=r(15780),m=r(13261),f=r(99948),x=r(50932),p=r(63345),h=r(26580),g=r(73089),b=r(83594);r(21816);var v=(0,r(33557).$)("1335ce302a94b1315d72cfe16bf4285a803e5c6e"),j=r(12086);function N(e){let{content:t,className:r,...a}=e,[i,l]=s.useTransition(),{isSignedIn:o,user:c,isLoaded:m}=(0,h.aF)();return o&&m&&b.q.includes(c.id)?(0,n.jsxs)(j.DropdownMenu,{children:[(0,n.jsx)(j.DropdownMenuTrigger,{asChild:!0,className:(0,u.cn)("data-[state=open]:bg-accent",r),...a,children:(0,n.jsxs)(p.z,{type:"button",variant:"ghost",size:"icon-sm",children:[(0,n.jsx)("span",{className:"sr-only",children:"Export actions"}),(0,n.jsx)(g.O,{className:"size-4","aria-hidden":"true"})]})}),(0,n.jsx)(j.DropdownMenuContent,{align:"end",children:(0,n.jsx)(j.DropdownMenuItem,{onSelect:function(){l(()=>{d.toast.promise(v({name:t.slice(0,10),body:t}),{loading:"Creating doc...",success:()=>"Adding document successfully.",error:e=>"There was an error creating the document."})})},children:"Export to Docs"})})]}):null}var y=r(84145),w=r(83363),k=r(6564),C=r(29705),z=r(79833),A=r(80097);function R(e){let{children:t,content:r,dialogClassname:s}=e;return(0,C.a)("(min-width: 768px)")?(0,n.jsxs)(z.Vq,{children:[(0,n.jsx)(z.hg,{asChild:!0,children:t}),(0,n.jsx)(z.cZ,{className:s,children:r})]}):(0,n.jsxs)(A.Drawer,{children:[(0,n.jsx)(A.DrawerTrigger,{asChild:!0,children:t}),(0,n.jsx)(A.DrawerContent,{children:r})]})}var S=r(14693);function T(e){let{toolSources:t}=e;return(0,n.jsx)(R,{dialogClassname:"max-w-3xl w-full",content:(0,n.jsx)(k.ScrollArea,{className:"my-8 h-full max-h-[80vh] overflow-y-auto sm:max-h-[500px]",children:(0,n.jsxs)("div",{className:"grid gap-4 px-2 pt-2",children:[(0,n.jsx)("h3",{className:"font-heading p-3 text-left text-2xl sm:p-0",children:"Sources"}),t.map(e=>(0,n.jsx)(S.V,{message:e},e.id))]})}),children:(0,n.jsx)(p.z,{variant:"ghost",size:"sm",className:"font-heading text-muted-extra h-6 w-full py-0 pl-0.5 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(w.M,{className:"size-4","aria-hidden":"true"}),"View Sources"]})})})}function D(e){let{message:t,toolMessages:r}=e,h="user"===t.role?t.documents:void 0,{copyToClipboard:g,isCopied:b}=(0,m.m)(),v=s.useMemo(()=>{let e;let s=[],a=/<(\w+)~(\w+) id="([^"]+)" data=({[^}]*}) ~>/g,i=0;for(;e=a.exec(t.content);){i<e.index&&s.push((0,n.jsx)(f.U,{content:t.content.substring(i,e.index)},i));let l=r.find(t=>t.tool.id===e[3]);l?s.push((0,n.jsx)(x.q,{message:l},e[3])):s.push((0,n.jsx)(f.U,{content:t.content.substring(e.index,a.lastIndex)},i)),i=a.lastIndex}return i<t.content.length&&s.push((0,n.jsx)(f.U,{content:t.content.substring(i)},i)),s},[t.content]);if("system"===t.role||"tool"===t.role)return null;try{if("assistant"===t.role&&t.content&&t.content.includes("isErrorMessage")){t.type="error-message";let e=JSON.parse(t.content);t.content=e.genericError}}catch(e){console.error(e)}let j=async(e,t)=>{try{if(!(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,rating:t})})).ok)return d.toast.error("Feedback submission failed");return d.toast.success("Feedback submitted successfully")}catch(e){return d.toast.error("Feedback submission failed")}};return(0,n.jsxs)("div",{className:(0,u.cn)("flex w-full flex-col","user"===t.role&&"pb-6"),children:["user"===t.role&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"bg-green-4 w-fit self-end rounded-md rounded-br-none px-3 pb-3 pt-2 sm:max-w-[70%]",children:(0,n.jsx)(f.U,{content:t.content})}),(0,n.jsx)("div",{children:(null==h?void 0:h.length)?(0,n.jsx)(y.DocumentCards,{documents:h}):null})]}),"assistant"===t.role&&(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:["error-message"===t.type&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,n.jsx)(a.Q,{className:"size-4 ","aria-hidden":"true"}),(0,n.jsx)("p",{children:"Error"})]}),v.map((e,t)=>(0,n.jsx)(s.Fragment,{children:e},t)),(0,n.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[r.length>0&&(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(T,{toolSources:r})}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(p.z,{variant:"ghost",size:"icon-sm",onClick:()=>{b||g(t.content)},children:b?(0,n.jsx)(i.J,{className:"size-4","aria-hidden":"true"}):(0,n.jsx)(l.T,{className:"size-4","aria-hidden":"true"})}),(0,n.jsx)(p.z,{variant:"ghost",size:"icon-sm",onClick:()=>{j(t.id,"thumbsUp")},children:(0,n.jsx)(o.V,{className:"size-4","aria-hidden":"true"})}),(0,n.jsx)(p.z,{variant:"ghost",size:"icon-sm",onClick:()=>{j(t.id,"thumbsDown")},children:(0,n.jsx)(c.L,{className:"size-4","aria-hidden":"true"})}),(0,n.jsx)(N,{content:t.content})]})]})]})]})}},6455:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n=r(9579);r(82933);var s=r(15780),a=r(32297);function i(e){let{children:t,trigger:r,className:i,setValue:l,value:o,unControlledValue:c}=e;return(0,n.jsx)(a.Accordion,{type:"single",orientation:"vertical",collapsible:!0,value:o,onValueChange:l,defaultValue:o,className:(0,s.cn)("bg-card text-card-foreground size-full overflow-hidden rounded-xl border px-4",i),children:(0,n.jsxs)(a.AccordionItem,{value:c,className:"h-full overflow-hidden border-none",children:[(0,n.jsx)(a.AccordionTrigger,{className:"py-3 hover:no-underline",children:r}),(0,n.jsx)(a.AccordionContent,{children:t})]})})}},5492:function(e,t,r){"use strict";r.r(t),r.d(t,{CircularBadgeIcon:function(){return u}});var n=r(9579);r(82933);var s=r(90853),a=r(99982),i=r(88827),l=r(15865),o=r(15780);let c=(0,l.j)(["inline-flex items-center justify-center rounded-full border","transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"],{variants:{variant:{default:"border-[#DBB07D]/40 bg-[#DBB07D]/10 text-[#DBB07D]",scheduled:"text-indigo-9 bg-indigo-4/30 border-indigo-6 dark:text-blue-500",trigger:"text-plum-9 bg-plum-4/30 border-plum-6"},size:{sm:"size-6",md:"size-9",lg:"size-12"}},defaultVariants:{variant:"default",size:"md"}}),d=e=>{switch(e){case"sm":return"size-3";case"lg":return"size-6";default:return"size-5"}};function u(e){let{className:t,variant:r="none",size:l="md",...u}=e,m="scheduled"===r?"calendar":"trigger"===r?"lightning":"stack",f=d(l),x={stack:(0,n.jsx)(s.i,{className:f}),calendar:(0,n.jsx)(a.R,{className:f}),lightning:(0,n.jsx)(i.B,{className:f})};return(0,n.jsx)("div",{className:(0,o.cn)(c({variant:"none"===r?"default":r,size:l}),t),...u,children:x[m]})}},5367:function(e,t,r){"use strict";r.r(t),r.d(t,{CodeBlock:function(){return x},generateRandomString:function(){return f},programmingLanguages:function(){return m}});var n=r(9579),s=r(82933),a=r(26629),i=r(81677),l=r(72246),o=r(8168),c=r(99300),d=r(13261),u=r(63345);let m={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="ABCDEFGHJKLMNPQRSTUVWXY3456789",n="";for(let t=0;t<e;t++)n+=r.charAt(Math.floor(Math.random()*r.length));return t?n.toLowerCase():n},x=(0,s.memo)(e=>{let{language:t,value:r}=e,{isCopied:s,copyToClipboard:x}=(0,d.m)({timeout:2e3});return(0,n.jsxs)("div",{className:"codeblock relative m-0 w-full overflow-hidden rounded-t-lg bg-zinc-800 p-0 text-sm",children:[(0,n.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-900 px-6 py-1 pr-4 ",children:[(0,n.jsx)("span",{className:"text-xs lowercase",children:t}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(u.z,{variant:"secondary",size:"icon-sm",className:"focus-visible:ring-1",onClick:()=>{let e=m[t]||".file",n="file-".concat(f(3,!0)).concat(e),s=window.prompt("Enter file name",n);if(!s)return;let a=new Blob([r],{type:"text/plain"}),i=URL.createObjectURL(a),l=document.createElement("a");l.download=s,l.href=i,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)},children:[(0,n.jsx)(a.U,{className:"size-4","aria-hidden":"true"}),(0,n.jsx)("span",{className:"sr-only",children:"Download"})]}),(0,n.jsxs)(u.z,{variant:"secondary",size:"icon-sm",className:"text-xs focus-visible:ring-1 focus-visible:ring-offset-0",onClick:()=>{s||x(r)},children:[s?(0,n.jsx)(i.J,{className:"size-4","aria-hidden":"true"}):(0,n.jsx)(l.C,{className:"size-4","aria-hidden":"true"}),(0,n.jsx)("span",{className:"sr-only",children:"Copy code"})]})]})]}),(0,n.jsx)(o.Z,{language:t,style:c.RY,PreTag:"div",wrapLongLines:!0,showLineNumbers:!0,customStyle:{margin:0,width:"100%",background:"transparent",padding:"1.5rem 1rem"},codeTagProps:{style:{fontSize:"0.8rem",fontFamily:"var(--font-mono)"}},children:r})]})});x.displayName="CodeBlock"},99948:function(e,t,r){"use strict";r.d(t,{U:function(){return u}});var n=r(9579),s=r(82933),a=r(51620),i=r(25413),l=r(23248),o=r(5367),c=r(94363);let d=(0,s.memo)(c.U,(e,t)=>e.children===t.children&&e.className===t.className);function u(e){let{content:t}=e;return(0,n.jsx)(d,{className:"prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg prose dark:prose-invert prose-p:leading-normal prose-pre:p-0 prose-ol:leading-normal prose-ul:leading-normal prose-li:my-1 max-w-full break-words text-base ",remarkPlugins:[a.Z,i.Z],components:{table(e){let{children:t}=e;return(0,n.jsx)(l.iA,{children:t})},thead(e){let{children:t}=e;return(0,n.jsx)(l.xD,{children:t})},tbody(e){let{children:t}=e;return(0,n.jsx)(l.RM,{children:t})},tr(e){let{children:t}=e;return(0,n.jsx)(l.SC,{children:t})},th(e){let{children:t}=e;return(0,n.jsx)(l.ss,{className:"py-2",children:t})},td(e){let{children:t}=e;return(0,n.jsx)(l.pj,{className:"py-2",children:t})},p(e){let{children:t}=e;return(0,n.jsx)("p",{children:t})},a(e){let{children:t,href:r,...a}=e,i=s.Children.toArray(t).map(e=>{var t;return null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:""}).join("").replace(/\[|\]/g,"");return/^\d+$/.test(i)?(0,n.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",...a,className:"bg-green-3 hover:bg-green-8 hover:text-primary-foreground relative bottom-[6px] mx-0.5 rounded px-[5px] py-[2.5px] text-[8px] font-bold no-underline",children:t}):(0,n.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",...a,className:"hover:underline",children:t})},ol(e){let{children:t}=e;return(0,n.jsx)("ol",{className:"list-decimal pl-6",children:t})},ul(e){let{children:t}=e;return(0,n.jsx)("ul",{className:"marker:text-muted-extra my-1 list-disc pl-6",children:t})},li(e){let{children:t}=e;return(0,n.jsx)("li",{children:t})},code(e){let{node:t,inline:r,className:a,children:i,...l}=e,c=s.Children.toArray(i),d=c[0],u=s.isValidElement(d)?d.props.children:d;if("▍"===u)return(0,n.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});"string"==typeof u&&(c[0]=u.replace("`▍`","▍"));let m=/language-(\w+)/.exec(a||"");return"string"!=typeof u||u.includes("\n")?(0,n.jsx)(o.CodeBlock,{language:m&&m[1]||"",value:String(i).replace(/\n$/,""),...l},Math.random()):(0,n.jsx)("code",{className:a,...l,children:c})}},children:t})}},74486:function(e,t,r){"use strict";r.d(t,{$:function(){return c}});var n=r(9579),s=r(82933),a=r(15865),i=r(15780);let l=(0,a.j)("relative flex items-center justify-center",{variants:{variant:{default:"text-primary",secondary:"text-secondary",destructive:"text-destructive",warning:"text-yellow-500",success:"text-green-500"},size:{default:"size-8",sm:"size-6",lg:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),o={thin:"border-[1.5px]",regular:"border-[3px]",bold:"border-[4px]"},c=s.forwardRef((e,t)=>{let{children:r,className:s,variant:a,weight:c,size:d,...u}=e,m=c?o[c]:"sm"===d?"border-[2px]":"border-[3px]";return(0,n.jsxs)("div",{className:(0,i.cn)(l({variant:a,size:d,className:s})),...u,ref:t,children:[(0,n.jsx)("i",{className:(0,i.cn)("animate-spinner-ease-spin absolute size-full rounded-full border-solid border-x-transparent border-b-current border-t-transparent",m),"aria-hidden":"true"}),(0,n.jsx)("i",{className:(0,i.cn)("animate-spinner-linear-spin absolute size-full rounded-full border-dotted border-x-transparent border-b-current border-t-transparent opacity-75",m),"aria-hidden":"true"}),r]})});c.displayName="Spinner"},50932:function(e,t,r){"use strict";r.d(t,{q:function(){return b}});var n=r(9579),s=r(92632),a=r(82933),i=r(89895),l=r(65987),o=r(74486),c=r(76134),d=r(95569),u=r(66027),m=r(76951),f=r(81677),x=r(20433),p=r(63345);function h(e){let{id:t,toolType:r,displayTexts:s}=e,[a]=(0,u.u)();return(0,n.jsx)(x.fC,{type:"single",collapsible:!0,children:(0,n.jsxs)(x.ck,{value:t,className:"bg-green-4/50 w-fit rounded-[1.25rem]",children:[(0,n.jsx)(x.xz,{asChild:!0,children:(0,n.jsxs)(p.z,{variant:"ghost",className:"w-full justify-between gap-2 rounded-full pr-1.5 text-sm hover:bg-transparent [&[data-state=open]>svg]:rotate-180",children:[d.vn[r],(0,n.jsx)(m.p,{className:"size-4 shrink-0 transition-transform duration-200",weight:"bold"})]})}),(0,n.jsxs)(x.VY,{ref:a,className:"flex flex-col gap-2 overflow-hidden px-3 text-sm",children:[(0,n.jsx)("div",{className:"pt-px"}),s.map((e,r)=>(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(f.J,{className:"text-muted-extra mr-2 size-[1.125rem]",weight:"bold"}),(0,n.jsx)("span",{className:"text-foreground",children:e})]},"".concat(r,"-").concat(t))),(0,n.jsx)("div",{className:"pb-4"})]})]})})}function g(e){var t;let{message:r}=e,s=a.useMemo(()=>{let e=r.tool.actions||[];return e[e.length-1]},[r.tool.actions]);if(!s)return null;let d=(null===(t=r.tool.actions)||void 0===t?void 0:t.map(e=>e.displayText))||[];return"complete"===r.tool.status?(0,n.jsx)(h,{displayTexts:d,toolType:r.tool.type,id:r.id}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:["end"===s.actionType?(0,n.jsx)(i.J,{className:"text-primary size-5",weight:"bold"}):"error"===s.actionType?(0,n.jsx)(l.Q,{className:"text-destructive size-5"}):(0,n.jsx)(o.$,{weight:"thin",children:(0,n.jsx)(c.D,{className:"size-4",toolType:r.tool.type})}),s.displayText]})}function b(e){let{message:t}=e,{tool:r}=t,{outputType:a,actions:i=[]}=r,l=i[i.length-1],o="standalone"===a&&l&&"end"===l.actionType;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(g,{message:t}),o&&(0,n.jsx)(s.B,{action:l,toolCallId:r.id})]})}},81144:function(e,t,r){"use strict";r.d(t,{gY:function(){return h},zS:function(){return p}});var n=r(90335),s=r(52981),a=r(53377),i=r(64958),l=r(89895),o=r(70149),c=r(13623),d=r(88827),u=r(56270),m=r(84037),f=r(24217),x=r(4076);function p(e){switch(e){case"writing":return n.k;case"search":return s.Y;case"document-analysis":return a.r;case"email":return i.b;case"check":return l.J;default:return o.a}}function h(e){switch(e){case"gmail":return x.P.gmail;case"researcher":return s.Y;case"file":return a.r;case"notion":return x.P.notion;case"scheduler":return c.f;case"trigger":return d.B;case"browsing":return u.T;case"map":return m.$;case"writing":case"compile":return n.k;case"messages":return f.g;case"gcal":return x.P.gcal;case"gdrive":return x.P.googleDrive;default:return o.a}}},92632:function(e,t,r){"use strict";r.d(t,{B:function(){return q}});var n=r(9579),s=r(82933),a=r(46228),i=r(61443),l=r(23355),o=r(11274),c=r(45688),d=r(15780),u=r(76982),m=r(63345),f=r(8767),x=r(63407),p=r(92364),h=r(5260),g=r(6455);let b=c.G0([c.Ry({text:c.Z_(),type:c.i0("short"),answer:c.Z_().optional()}),c.Ry({text:c.Z_(),type:c.i0("multi"),options:c.IX(c.Z_()),selectedOptions:c.IX(c.Z_())})]),v=c.Ry({primaryQuestion:b.optional(),secondaryQuestion:c.Ry({text:c.Z_(),answer:c.Z_().optional()}).optional()});var j=r(51348),N=r(11163);r(21816);var y=(0,r(33557).$)("787889157eb91fd0ea60dd0a8d65ed3d9ba23008"),w=r(78189);function k(e){let{workflowId:t,toolAction:r,className:s,children:a,...i}=e;return(0,n.jsx)("div",{className:(0,d.cn)("bg-accent hover:bg-accent/70 relative flex h-full min-h-0 min-w-0 flex-col justify-center gap-2.5 overflow-hidden rounded-md p-2.5",s),...i,children:(0,n.jsx)("div",{className:"line-clamp-4 break-all text-sm",children:a})})}var C=r(81677);function z(e){let{toolAction:t,to:r,subject:a,className:i,...l}=e,[o,c]=s.useState(t.id);return(0,n.jsx)(g._,{className:"bg-background px-5",value:o,setValue:c,unControlledValue:t.id,trigger:(0,n.jsxs)("div",{className:"text-muted-special mr-2 flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(C.J,{className:"text-primary mr-2 size-5",weight:"bold"}),(0,n.jsx)("p",{children:"Email Sent"})]}),(0,n.jsx)("p",{className:"text-primary text-xs font-bold",children:"View Content"})]}),children:(0,n.jsxs)("div",{className:"space-y-3 border-t pt-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2 border-b pb-3 text-sm",children:[(0,n.jsx)("p",{className:"text-muted-extra",children:"To"}),(0,n.jsx)(w.C,{variant:"info",children:r})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2 border-b pb-3",children:[(0,n.jsx)("p",{className:"text-muted-extra",children:"Subject"}),(0,n.jsx)("p",{children:a})]}),(0,n.jsx)("div",{className:(0,d.cn)(i,l.disabled&&"pointer-events-none size-full"),children:(0,n.jsx)(j.M,{storageKey:t.id,disableLocalStorage:!0,className:(0,d.cn)(i,l.disabled&&"pointer-events-none"),...l},t.id)})]})})}let A=c.Ry({to:c.Z_().email({message:"Please enter a valid email address."}),subject:c.Z_().min(1,{message:"Subject is required."}),body:c.Z_().min(9,{message:"Body is required."})});function R(e){let{ui:t,toolPreview:r,toolAction:s}=e;return r?(0,n.jsx)(k,{toolAction:s,...r}):null}r(89895);var S=r(99948),T=r(81144),D=r(25484),Z=r(51201),M=r(41044),L=r(7342);let I={lat:49.2827,lng:-123.1207};function E(e){let{ui:t,isLoaded:r}=e,[a,i]=(0,s.useState)(I);return(s.useEffect(()=>{if(t.content.places.length>0){let e=t.content.places[0].location;i({lat:e.latitude,lng:e.longitude})}},[t.content.places]),r)?(0,n.jsx)("div",{className:"h-[200px] w-[500px] overflow-hidden rounded-md",children:(0,n.jsx)(L.b6,{mapContainerStyle:{width:"100%",height:"100%"},center:a,zoom:13,options:{disableDefaultUI:!0,draggable:!1}})}):(0,n.jsx)("div",{children:"Loading preview map..."})}var _=r(87157),P=r(76951),B=r(87260),O=r(32635),U=r(23248);function V(e){let{emails:t}=e,r=t.slice(0,3);return(0,n.jsx)("div",{className:"overflow-hidden rounded-md p-4 group-hover:hidden",children:(0,n.jsx)(U.iA,{children:(0,n.jsx)(U.RM,{children:r.map(e=>(0,n.jsxs)(U.SC,{className:"pointer-events-none",children:[(0,n.jsx)(U.pj,{className:"w-[100px]",children:(0,d.Vh)(e.from)}),(0,n.jsx)(U.pj,{className:"text-muted-foreground line-clamp-1",children:e.subject})]},e.id))})})})}let F={"read-emails-table":function(e){let{ui:t,toolPreview:r,toolAction:a}=e,{emails:i}=t.content,[l,o]=s.useState(!1),c=l?i.length:4;if(r)return(0,n.jsx)(k,{toolAction:a,...r,children:(0,n.jsx)(V,{emails:i})});let u=e=>{let t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"bg-card overflow-hidden rounded-md p-4",children:[(0,n.jsx)(U.iA,{children:(0,n.jsx)(U.RM,{children:i.slice(0,c).map(e=>(0,n.jsxs)(U.SC,{className:"hover:cursor-pointer",onClick:()=>{var t;return u((t=e.id,"https://mail.google.com/mail/u/0/#inbox/".concat(t)))},children:[(0,n.jsx)(U.pj,{className:"text-muted-foreground py-4 pr-2",children:(0,n.jsx)("p",{className:"line-clamp-1 text-ellipsis",children:e.subject})}),(0,n.jsx)(U.pj,{className:"whitespace-nowrap pr-2",children:(0,d.Vh)(e.from)}),(0,n.jsx)(U.pj,{className:"text-muted-foreground whitespace-nowrap pl-2",children:function(e){let t=new Date(e);return(0,B.Z)(t)?(0,O.Z)(t,"h:mm a"):(0,O.Z)(t,"MMM d, yyyy")}(e.date)})]},e.id))})}),i.length>4&&(0,n.jsxs)(m.z,{onClick:()=>o(!l),className:"w-full",variant:"ghost",children:[l?"Show less":"Show more",l?(0,n.jsx)(_.U,{className:"ml-2 size-4","aria-hidden":"true"}):(0,n.jsx)(P.p,{className:"ml-2 size-4","aria-hidden":"true"})]})]})})},map:function(e){let{ui:t,toolPreview:r,toolAction:a}=e,[i,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(I),d=(0,s.useRef)(null),{isLoaded:u}=(0,L.Ji)({id:"google-map-script",googleMapsApiKey:"AIzaSyBYGRx_O5MGZAE_029gEUjhCCHQUBnTbvs",libraries:["places"]}),m=t.content.places,f=(0,s.useCallback)(e=>{if(d.current=e,Array.isArray(m)){let e=m.map(e=>({lat:e.location.latitude,lng:e.location.longitude}));l(e),e.length>0&&c({lat:e[0].lat,lng:e[0].lng})}},[m]);return r?(0,n.jsx)(k,{toolAction:a,...r,children:(0,n.jsx)(E,{ui:t,isLoaded:u})}):(0,n.jsx)(n.Fragment,{children:u&&(0,n.jsx)(L.b6,{mapContainerClassName:"w-full h-[25vh] md:h-[300px] rounded-md",center:o,zoom:11,onLoad:f,children:i.map((e,t)=>(0,n.jsx)(L.Jx,{position:e,label:{text:"".concat(t+1),color:"white"}},t))})})},"email-draft":function(e){let{ui:t,toolPreview:r,toolAction:d}=e,u=(0,a.usePathname)(),[x,g]=s.useState(d.readOnly),[b,v]=s.useTransition(),{emailDraft:C}=t.content,{to:R,subject:S,body:T,id:D}=C,Z=(0,l.cI)({resolver:(0,i.F)(A),defaultValues:{to:R,subject:S,body:T}}),[M,L]=s.useState(""),I=Z.watch("to");s.useEffect(()=>{if(""===I){L("");return}let e=setTimeout(()=>{L(I)},500);return()=>{clearTimeout(e)}},[I]);let E=c.Z_().email().safeParse(M).success,_=async e=>{v(async()=>{try{(await y(d.id,{emailDraft:{id:D,to:e.to,subject:e.subject,body:e.body}})).readOnly&&g(!0)}catch(e){o.toast.error("An error occurred while sending the email.")}})},P=()=>{Z.setValue("to","")},B=u.includes("share");return r?(0,n.jsx)(k,{toolAction:d,...r,children:(0,n.jsx)("div",{children:"Drafting email"})}):x||B?(0,n.jsx)(z,{toolAction:d,to:R,subject:S,defaultValue:Z.getValues("body"),disabled:d.readOnly}):(0,n.jsx)(f.Zb,{className:"bg-background border",children:(0,n.jsx)(f.Ol,{className:"flex gap-2",children:(0,n.jsx)(p.l0,{...Z,children:(0,n.jsxs)("form",{onSubmit:Z.handleSubmit(_),className:"space-y-6",children:[(0,n.jsx)(p.Wi,{control:Z.control,name:"to",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{className:"border-b pb-3",children:[(0,n.jsx)(p.NI,{children:E&&M?(0,n.jsx)(w.C,{variant:"info",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,n.jsx)("p",{className:"text-xs font-semibold",children:M}),(0,n.jsx)(m.z,{type:"button","aria-label":"Remove email",variant:"ghost",size:"icon",className:"hover:bg-muted/60 size-5 rounded-full p-0",onClick:P,children:(0,n.jsx)(N.X,{className:"size-3 shrink-0","aria-hidden":"true"})})]})}):(0,n.jsx)(h.I,{placeholder:"Recipient",className:"m-0 resize-none border-0 bg-transparent p-0 focus:border-transparent focus-visible:ring-0",...t})}),(0,n.jsx)(p.zG,{})]})}}),(0,n.jsx)(p.Wi,{control:Z.control,name:"subject",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{className:"border-b pb-3",children:[(0,n.jsx)(p.NI,{children:(0,n.jsx)(h.I,{placeholder:"Subject",className:"m-0 resize-none space-y-0 border-0 bg-transparent p-0 focus:border-transparent focus-visible:ring-0",...t})}),(0,n.jsx)(p.zG,{})]})}}),(0,n.jsx)(p.Wi,{control:Z.control,name:"body",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{children:[(0,n.jsx)(p.NI,{children:(0,n.jsx)(j.M,{defaultValue:T,disableLocalStorage:!0,className:"prose:p-0 prose:m-0 ml-[-8]",onUpdate:e=>t.onChange(null==e?void 0:e.getHTML()),...t})}),(0,n.jsx)(p.zG,{})]})}}),(0,n.jsx)(m.z,{type:"submit",isLoading:b,children:"Send"})]})})})})},text:function(e){let{ui:t,toolPreview:r,toolAction:s}=e,{text:a}=t.content;return(0,n.jsx)(S.U,{content:a})},"search-queries":function(e){let{ui:t}=e,{queries:r}=t.content;return(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,t)=>(0,n.jsx)("div",{className:"font-heading text-muted-extra rounded-md border px-3 py-1 text-sm tracking-wider md:rounded-full ",children:e},t))})},"search-results":function(e){let{ui:t,toolPreview:r,toolAction:a}=e,{results:i}=t.content,[l,o]=s.useState(!1),c=l?i:i.slice(0,6);return(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:[c.map((e,t)=>(0,n.jsxs)(Z.default,{href:e.source,target:"_blank",className:"hover:bg-muted flex flex-col rounded-sm border px-3 py-2",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center text-xs",children:[(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:"overflow-hidden rounded-lg",children:(0,n.jsx)("img",{className:"block size-4",src:(0,d.KD)(e.source),alt:e.title})})}),(0,n.jsx)("p",{className:"ml-2 truncate",children:(0,d.L)(e.source)})]}),(0,n.jsx)("div",{className:"line-clamp-2 text-sm",children:e.title})]},t)),i.length>6&&(0,n.jsx)("button",{onClick:()=>o(!l),className:"hover:bg-muted line-clamp-2 h-full rounded-sm border px-2 py-1 text-xs font-medium",children:l?"Show less":" +".concat(i.length-6," more")})]})},icon:function(e){let{ui:t,toolPreview:r}=e,{content:s}=t,a=(0,T.zS)(s.icon),i=s.iconText;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a,{className:"size-5","aria-hidden":"true"}),(0,n.jsx)("p",{children:i})]})},"clarifying-question":function(e){let{ui:t,toolPreview:r,toolCallId:c,toolAction:b}=e,{primaryQuestion:j,secondaryQuestion:N}=t.content.questions,{answers:y}=t.content,[w,k]=s.useState({skip:!1,submit:!1}),C=y?b.id:"",[z,A]=s.useState(C),{sendAction:R,chatId:S}=(0,u.V)(),T=(0,a.usePathname)(),D=(0,l.cI)({resolver:(0,i.F)(v),defaultValues:{primaryQuestion:"short"===j.type?{...j,answer:""}:{...j,selectedOptions:[]},secondaryQuestion:N?{...N,answer:""}:void 0}});if(r&&!r.hidden)return null;let Z=T.includes("share");return!y&&Z?null:y?0===y.length?null:(0,n.jsx)(g._,{value:z,setValue:A,unControlledValue:b.id,trigger:(0,n.jsx)("div",{className:"text-muted-special mr-2 flex w-full items-center justify-between p-0",children:(0,n.jsx)("div",{className:"font-heading text-lg tracking-wide",children:"Refine"})}),className:"bg-background text-[0.875rem]",children:(0,n.jsx)("div",{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"mb-2",children:"Understanding your response"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map((e,t)=>(0,n.jsx)("div",{className:"text-green-11 bg-green-3 border-green-3 items-center rounded-full border-2 px-3 py-1 font-medium",children:e},t))})]})})}):(0,n.jsxs)(f.Zb,{className:"bg-background group flex flex-col space-y-2.5 overflow-hidden p-2 text-[14px]",children:[(0,n.jsx)(f.Ol,{className:"flex-row items-center gap-1.5 space-y-0",children:(0,n.jsx)(f.ll,{className:"font-heading text-xl tracking-wide",children:"Refine prompt"})}),(0,n.jsx)(f.aY,{children:(0,n.jsx)(p.l0,{...D,children:(0,n.jsxs)("form",{onSubmit:D.handleSubmit(function(e){k({...w,submit:!0});let n=function(e){var t;let r=[],n=e.primaryQuestion;n&&("multi"===n.type&&n.selectedOptions?r.push({questionNum:1,answer:n.selectedOptions.join(", ")}):"short"===n.type&&n.answer&&r.push({questionNum:1,answer:n.answer}));let s=null===(t=e.secondaryQuestion)||void 0===t?void 0:t.answer;return s&&r.push({questionNum:2,answer:s}),r}(e);R({data:{originalQuestions:t.content.questions,workflowId:(null==r?void 0:r.workflowId)||"",questionResponses:n,toolCallId:c,workflowAction:"approve"},eventType:"question_answered",chatId:S},(e,t)=>{e||"error"!==t.status||o.toast.error(t.message)}),setTimeout(()=>{k({...w,submit:!1})},1e4)}),className:"space-y-8",children:["multi"===j.type&&j.options&&(0,n.jsx)(l.Qr,{control:D.control,name:"primaryQuestion.selectedOptions",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{className:"flex flex-col gap-2",children:[(0,n.jsx)(p.lX,{children:j.text}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:j.options.map((e,r)=>{var s,a;return(0,n.jsxs)(p.lX,{htmlFor:e,className:(0,d.cn)("cursor-pointer items-center rounded-full border-2 px-3 py-1 font-medium",(null===(s=t.value)||void 0===s?void 0:s.includes(e))&&"text-green-11 bg-green-3 border-green-3"),children:[(0,n.jsx)(x.s,{checked:null===(a=t.value)||void 0===a?void 0:a.includes(e),id:e,className:"cursor-pointer",onCheckedChange:r=>{r?t.onChange([...t.value,e]):t.onChange(t.value.filter(t=>t!==e))}}),e]},r)})})]})}}),"short"===j.type&&(0,n.jsx)(p.Wi,{control:D.control,name:"primaryQuestion.answer",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{children:[(0,n.jsx)(p.lX,{children:j.text}),(0,n.jsx)(p.NI,{children:(0,n.jsx)(h.I,{placeholder:"Your answer",...t})})]})}}),N&&(0,n.jsx)(p.Wi,{control:D.control,name:"secondaryQuestion.answer",render:e=>{let{field:t}=e;return(0,n.jsxs)(p.xJ,{children:[(0,n.jsx)(p.lX,{children:N.text}),(0,n.jsx)(p.NI,{children:(0,n.jsx)(h.I,{placeholder:"Your answer",...t})})]})}}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(m.z,{type:"submit",isLoading:w.submit,children:"Submit"}),(0,n.jsx)(m.z,{type:"button",onClick:function(){k({...w,skip:!0}),R({data:{originalQuestions:t.content.questions,workflowId:(null==r?void 0:r.workflowId)||"",questionResponses:[],toolCallId:c,workflowAction:"dismiss"},eventType:"question_answered",chatId:S},(e,t)=>{e||"error"!==t.status||o.toast.error(t.message)}),setTimeout(()=>{k(e=>({...e,skip:!1}))},1e4)},variant:"outline",isLoading:w.skip,children:"Skip"})]})]})})})]})},none:R,"progress-bar":R,"analyze-file":function(e){let{ui:t,toolPreview:r,toolAction:a}=e,{titles:i}=t.content,[l,o]=s.useState(!1),c=l?i:i.slice(0,6);return(0,n.jsxs)("div",{className:"bg-card space-y-2 rounded-md p-3",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Files Used"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[c.map((e,t)=>(0,n.jsx)("div",{className:"flex items-center border-b py-2 transition-colors last:border-b-0",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(D.a,{className:"text-primary size-6"}),(0,n.jsx)("div",{className:"ml-3 line-clamp-2 text-sm",children:e})]})},t)),i.length>6&&(0,n.jsx)("button",{onClick:()=>o(!l),className:"hover:bg-muted mt-2 size-full rounded-sm border px-2 py-1 text-xs font-medium transition-colors duration-150",children:l?"Show less":" +".concat(i.length-6," more")})]})]})},"analyze-notion":function(e){let{ui:t,toolPreview:r,toolAction:a}=e,{results:i}=t.content,[l,o]=s.useState(!1),c=l?i:i.slice(0,6);return(0,n.jsxs)("div",{className:"bg-card space-y-2 rounded-md p-3",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Notion Pages Used"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[c.map((e,t)=>(0,n.jsx)(Z.default,{href:e.url,target:"_blank",className:"hover:bg-accent flex items-center border-b py-4 transition-colors last:border-b-0",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(M.F,{className:"text-primary size-6"}),(0,n.jsx)("div",{className:"ml-3 line-clamp-2 text-sm",children:e.title})]})},t)),i.length>6&&(0,n.jsx)("button",{onClick:()=>o(!l),className:"hover:bg-muted mt-2 size-full rounded-sm border px-2 py-1 text-xs font-medium transition-colors duration-150",children:l?"Show less":" +".concat(i.length-6," more")})]})]})},"analyze-gdrive":function(e){let{ui:t,toolPreview:r,toolAction:a}=e,{titles:i}=t.content,[l,o]=s.useState(!1),c=l?i:i.slice(0,6);return(0,n.jsxs)("div",{className:"bg-card space-y-2 rounded-md p-3",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Google Drive Files Used"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[c.map((e,t)=>(0,n.jsx)("div",{className:"flex items-center border-b py-2 transition-colors last:border-b-0",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(D.a,{className:"text-primary size-6"}),(0,n.jsx)("div",{className:"ml-3 line-clamp-2 text-sm",children:e})]})},t)),i.length>6&&(0,n.jsx)("button",{onClick:()=>o(!l),className:"hover:bg-muted mt-2 size-full rounded-sm border px-2 py-1 text-xs font-medium transition-colors duration-150",children:l?"Show less":" +".concat(i.length-6," more")})]})]})},error:R};function q(e){let{action:t,toolPreview:r,toolCallId:s}=e,a=F[t.ui.component];return a?(0,n.jsx)(a,{ui:t.ui,toolPreview:r,toolAction:t,toolCallId:s}):(console.error("Component not found for type: ".concat(t.ui.component)),null)}},76134:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var n=r(9579),s=r(51348),a=r(81144);function i(e){let{toolType:t,className:r,...i}=e,l=(0,a.gY)(t);return(0,n.jsx)(l,{className:(0,s.cn)("size-5",r),"aria-hidden":"true",...i})}},32297:function(e,t,r){"use strict";r.r(t),r.d(t,{Accordion:function(){return d},AccordionContent:function(){return f},AccordionItem:function(){return u},AccordionTrigger:function(){return m}});var n=r(9579),s=r(82933),a=r(34504),i=r(1003),l=r(76951),o=r(20433),c=r(15780);let d=o.fC,u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.ck,{ref:t,className:(0,c.cn)("border-b",r),...s})});u.displayName="AccordionItem";let m=s.forwardRef((e,t)=>{let{className:r,children:d,asChild:u,icon:m="chevron",fillIcon:f,iconClassName:x,...p}=e,[h,g]=s.useState(!1),b="plus-minus"===m?h?a.W:i.v:l.p;return u?(0,n.jsx)(o.h4,{className:"flex",children:(0,n.jsx)(o.xz,{ref:t,className:(0,c.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),onClick:()=>g(!h),asChild:u,...p,children:d})}):(0,n.jsx)(o.h4,{className:"flex",children:(0,n.jsxs)(o.xz,{ref:t,className:(0,c.cn)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",r),onClick:()=>g(!h),asChild:u,...p,children:[d,(0,n.jsx)(b,{className:(0,c.cn)("text-muted-foreground size-4 shrink-0 transition-transform duration-200",x),weight:f?"fill":"bold"})]})})});m.displayName=o.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e;return(0,n.jsx)(o.VY,{ref:t,className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:(0,n.jsx)("div",{className:(0,c.cn)("pb-4 pt-0",r),children:s})})});f.displayName=o.VY.displayName},78189:function(e,t,r){"use strict";r.d(t,{C:function(){return l},t:function(){return i}});var n=r(9579);r(82933);var s=r(15865),a=r(15780);let i=(0,s.j)("focus:ring-ring inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover border-transparent shadow",secondary:"hover:bg-muted/80 bg-muted text-muted-foreground border-transparent",destructive:"hover:bg-destructive/80 bg-destructive text-destructive-foreground border-transparent shadow",warning:"text-amber-9 bg-amber-4/30 hover:bg-amber-4/60 border-transparent",success:"text-green-9 bg-green-4/30 hover:bg-green-4/60 border-transparent",info:"border-transparent bg-blue-50 text-blue-600 dark:bg-blue-900/40 dark:text-blue-400",blue:"text-indigo-9 bg-indigo-4/30 hover:bg-indigo-4/60 border-transparent dark:text-blue-400",plum:"text-plum-9 bg-plum-4/30 hover:bg-plum-4/60 border-transparent",outline:"text-foreground hover:bg-muted/60"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},63407:function(e,t,r){"use strict";r.d(t,{X:function(){return o},s:function(){return c}});var n=r(9579),s=r(82933),a=r(81677),i=r(93988),l=r(15780);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(i.fC,{ref:t,className:(0,l.cn)("border-primary focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer size-[18px] shrink-0 rounded-sm border shadow focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:(0,n.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(a.J,{className:"size-4","aria-hidden":"true",weight:"bold"})})})});o.displayName=i.fC.displayName;let c=s.forwardRef((e,t)=>(0,n.jsx)(i.fC,{ref:t,...e,children:(0,n.jsx)(i.z$,{})}));c.displayName="UnstyledCheckbox"},12086:function(e,t,r){"use strict";r.r(t),r.d(t,{DropdownMenu:function(){return d},DropdownMenuCheckboxItem:function(){return j},DropdownMenuContent:function(){return b},DropdownMenuGroup:function(){return m},DropdownMenuItem:function(){return v},DropdownMenuLabel:function(){return y},DropdownMenuPortal:function(){return f},DropdownMenuRadioGroup:function(){return p},DropdownMenuRadioItem:function(){return N},DropdownMenuSeparator:function(){return w},DropdownMenuShortcut:function(){return k},DropdownMenuSub:function(){return x},DropdownMenuSubContent:function(){return g},DropdownMenuSubTrigger:function(){return h},DropdownMenuTrigger:function(){return u}});var n=r(9579),s=r(82933),a=r(20668),i=r(81677),l=r(56993),o=r(81704),c=r(15780);let d=o.fC,u=o.xz,m=o.ZA,f=o.Uv,x=o.Tr,p=o.Ee,h=s.forwardRef((e,t)=>{let{className:r,inset:s,children:i,...l}=e;return(0,n.jsxs)(o.fF,{ref:t,className:(0,c.cn)("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",s&&"pl-8",r),...l,children:[i,(0,n.jsx)(a.T,{className:"ml-auto size-4","aria-hidden":"true"})]})});h.displayName=o.fF.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.tu,{ref:t,className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg",r),...s})});g.displayName=o.tu.displayName;let b=s.forwardRef((e,t)=>{let{className:r,sideOffset:s=4,...a}=e;return(0,n.jsx)(o.Uv,{children:(0,n.jsx)(o.VY,{ref:t,sideOffset:s,className:(0,c.cn)("bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})})});b.displayName=o.VY.displayName;let v=s.forwardRef((e,t)=>{let{className:r,inset:s,...a}=e;return(0,n.jsx)(o.ck,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",r),...a})});v.displayName=o.ck.displayName;let j=s.forwardRef((e,t)=>{let{className:r,children:s,checked:a,...l}=e;return(0,n.jsxs)(o.oC,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:a,...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(i.J,{className:"size-4","aria-hidden":"true"})})}),s]})});j.displayName=o.oC.displayName;let N=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e;return(0,n.jsxs)(o.Rk,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...a,children:[(0,n.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(l.K,{className:"size-4 fill-current","aria-hidden":"true"})})}),s]})});N.displayName=o.Rk.displayName;let y=s.forwardRef((e,t)=>{let{className:r,inset:s,...a}=e;return(0,n.jsx)(o.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",r),...a})});y.displayName=o.__.displayName;let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.Z0,{ref:t,className:(0,c.cn)("bg-muted -mx-1 my-1 h-px",r),...s})});w.displayName=o.Z0.displayName;let k=e=>{let{className:t,...r}=e;return(0,n.jsx)("span",{className:(0,c.cn)("ml-auto text-xs tracking-widest opacity-60",t),...r})};k.displayName="DropdownMenuShortcut"},92364:function(e,t,r){"use strict";r.d(t,{NI:function(){return h},Wi:function(){return u},l0:function(){return c},lX:function(){return p},pf:function(){return g},xJ:function(){return x},zG:function(){return b}});var n=r(9579),s=r(82933),a=r(67502),i=r(23355),l=r(15780),o=r(70643);let c=i.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(i.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(f),{getFieldState:r,formState:n}=(0,i.Gc)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...a}},f=s.createContext({}),x=s.forwardRef((e,t)=>{let{className:r,...a}=e,i=s.useId();return(0,n.jsx)(f.Provider,{value:{id:i},children:(0,n.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...a})})});x.displayName="FormItem";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:a,formItemId:i}=m();return(0,n.jsx)(o._,{ref:t,className:(0,l.cn)(a&&"text-destructive",r),htmlFor:i,...s})});p.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,n.jsx)(a.g7,{ref:t,id:i,"aria-describedby":s?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!s,...r})});h.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:a}=m();return(0,n.jsx)("p",{ref:t,id:a,className:(0,l.cn)("text-muted-foreground text-[0.8rem]",r),...s})});g.displayName="FormDescription";let b=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e,{error:i,formMessageId:o}=m(),c=i?String(null==i?void 0:i.message):s;return c?(0,n.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-destructive text-[0.8rem] font-medium",r),...a,children:c}):null});b.displayName="FormMessage"},5260:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(9579),s=r(82933),a=r(15780);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("placeholder:text-muted-extra focus-visible:ring-ring border-input flex h-9 w-full rounded-sm border bg-transparent px-3 py-1 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},70643:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var n=r(9579),s=r(82933),a=r(62480),i=r(15865),l=r(15780);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,l.cn)(o(),r),...s})});c.displayName=a.f.displayName},6564:function(e,t,r){"use strict";r.r(t),r.d(t,{ScrollArea:function(){return l},ScrollBar:function(){return o}});var n=r(9579),s=r(82933),a=r(46801),i=r(15780);let l=s.forwardRef((e,t)=>{let{className:r,children:s,orientation:l,scrollBarClassName:c,viewportRef:d,...u}=e;return(0,n.jsxs)(a.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",r),...u,children:[(0,n.jsx)(a.l_,{ref:d,className:"size-full rounded-[inherit]",children:s}),(0,n.jsx)(o,{orientation:l,className:(0,i.cn)(c)}),(0,n.jsx)(a.Ns,{})]})});l.displayName=a.fC.displayName;let o=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...l}=e;return(0,n.jsx)(a.gb,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",r),...l,children:(0,n.jsx)(a.q4,{className:"bg-border relative flex-1 rounded-full"})})});o.displayName=a.gb.displayName},77392:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},DI:function(){return u},Ph:function(){return d},Ql:function(){return b},i4:function(){return f},ki:function(){return m},n5:function(){return g}});var n=r(9579),s=r(82933),a=r(76951),i=r(87157),l=r(81677),o=r(44847),c=r(15780);let d=o.fC,u=o.ZA,m=o.B4,f=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(o.xz,{ref:t,className:(0,c.cn)("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-10 w-full items-center justify-between rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...i,children:[s,(0,n.jsx)(o.JO,{asChild:!0,children:(0,n.jsx)(a.p,{className:"ml-1 size-4 opacity-50"})})]})});f.displayName=o.xz.displayName;let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,n.jsx)(i.U,{className:"size-4"})})});x.displayName=o.u_.displayName;let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,n.jsx)(a.p,{className:"size-4"})})});p.displayName=o.$G.displayName;let h=s.forwardRef((e,t)=>{let{className:r,children:s,position:a="popper",...i}=e;return(0,n.jsx)(o.h_,{children:(0,n.jsxs)(o.VY,{ref:t,className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a,...i,children:[(0,n.jsx)(x,{}),(0,n.jsx)(o.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(p,{})]})})});h.displayName=o.VY.displayName;let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});g.displayName=o.__.displayName;let b=s.forwardRef((e,t)=>{let{className:r,children:s,...a}=e;return(0,n.jsxs)(o.ck,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...a,children:[(0,n.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(o.wU,{children:(0,n.jsx)(l.J,{className:"text-primary size-5",weight:"bold"})})}),(0,n.jsx)(o.eT,{children:s})]})});b.displayName=o.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(o.Z0,{ref:t,className:(0,c.cn)("bg-muted -mx-1 my-1 h-px",r),...s})}).displayName=o.Z0.displayName},23248:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var n=r(9579),s=r(82933),a=r(15780);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("text-muted-foreground mt-4 text-sm",r),...s})}).displayName="TableCaption"},84145:function(e,t,r){"use strict";r.r(t),r.d(t,{DocumentCard:function(){return u},DocumentCards:function(){return m},FileCard:function(){return d}});var n=r(9579),s=r(25484),a=r(11163),i=r(15780),l=r(63345),o=r(8767),c=r(4076);function d(e){let{uploadedFile:t,removeFile:r}=e,{progress:d,error:u,file:m}=t,f=100===d&&!u;return(0,n.jsxs)(o.Zb,{className:"group relative w-[250px]",children:[(0,n.jsxs)("div",{className:"flex w-full flex-row items-center p-2",children:[(0,n.jsx)(s.a,{className:"size-8 shrink-0 fill-blue-600","aria-hidden":"true"}),(0,n.jsxs)("div",{className:"ml-1 line-clamp-1 flex w-full flex-col text-sm",children:[(0,n.jsx)("p",{className:"truncate",children:m.name}),(0,n.jsx)("p",{className:"uppercase",children:(0,i.mD)(m.name)})]})]}),(0,n.jsx)(l.z,{type:"button","aria-label":"Remove file",variant:"ghost",size:"icon",disabled:!f,onClick:()=>r(m),className:(0,i.cn)("bg-background absolute bottom-11 right-[-5px] size-5 rounded-full border p-0 shadow-sm",f&&"hover:bg-muted opacity-0 group-hover:opacity-100"),children:f?(0,n.jsx)(a.X,{className:(0,i.cn)("size-3",f&&"hidden group-hover:block"),"aria-hidden":"true"}):(0,n.jsx)(c.P.spinner,{className:"size-3 animate-spin"})})]})}function u(e){let{document:t}=e;return(0,n.jsx)(o.Zb,{className:"group relative w-[250px]",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center  px-3 py-2",children:[(0,n.jsx)(s.a,{className:"size-8 shrink-0 fill-blue-600"}),(0,n.jsxs)("div",{className:"ml-1 line-clamp-1 flex w-full flex-col text-sm",children:[(0,n.jsx)("p",{className:"truncate",children:t.name}),(0,n.jsx)("p",{className:"uppercase",children:(0,i.mD)(t.name)})]})]})})}function m(e){let{documents:t}=e;return(0,n.jsx)("div",{className:"flex flex-wrap justify-end gap-2 py-4",children:t.map(e=>(0,n.jsx)(u,{document:e},e.id))})}},89425:function(e,t,r){"use strict";r.d(t,{NP:function(){return x},QW:function(){return p},X5:function(){return h}});var n=r(9579),s=r(82933),a=r(76951),i=r(70149),l=r(20433),o=r(72946),c=r(15780),d=r(32297),u=r(63345),m=r(76134),f=r(14693);function x(e){let{toolMessages:t,workflowStatus:r}=e,[a,l]=s.useState([]);return"requires_clarification"===r||"requires_approval"===r?null:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(d.Accordion,{type:"multiple",className:"w-full",value:a,onValueChange:l,children:t.map((e,r)=>(0,n.jsx)(p,{i:r,toolMessage:e,setValue:l,lastItem:t.length-1===r},r))}),"complete"===r&&(0,n.jsxs)("div",{className:"mt-6 flex flex-row items-center  gap-2",children:[(0,n.jsx)(i.a,{className:"text-neutral-60 size-5","aria-hidden":"true",weight:"bold"}),(0,n.jsx)("p",{className:"font-heading text-neutral-60 text-xl font-medium tracking-wide",children:"Results"})]})]})}function p(e){var t;let{i:r,toolMessage:i,lastItem:x,setValue:p}=e,g=s.useRef(null),[b,v]=s.useState(!1),[j,N]=s.useState(null);return s.useEffect(()=>{j!==i.tool.status&&(N(i.tool.status),"in_progress"===i.tool.status?p(e=>[...e,"".concat(i.id,"-").concat(r+1)]):"complete"===i.tool.status&&p(e=>e.filter(e=>e!=="".concat(i.id,"-").concat(r+1))))},[i.tool.status,i.id,r,p,j]),(0,n.jsxs)(d.AccordionItem,{value:"".concat(i.id,"-").concat(r+1),className:"h-full border-0",children:[(0,n.jsx)(l.xz,{ref:g,className:"relative flex w-full flex-col justify-between py-4  text-[15px] transition-all [&[data-state=open]>div>svg]:rotate-180",children:(0,n.jsxs)("div",{className:"flex w-full items-start justify-between gap-2.5 transition-all",children:[(0,n.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(h,{i:r,toolStatus:i.tool.status,className:"bg-indigo-4 hover:bg-indigo-5",children:(0,n.jsx)(m.D,{toolType:i.tool.type,className:"size-5"})}),(0,n.jsx)("div",{className:(0,c.cn)("bg-indigo-4 hover:bg-indigo-5 absolute left-[14px] top-[25px] -z-10 h-16 w-1",x?"h-0":"h-16")})]}),(0,n.jsx)("div",{className:"mt-1 line-clamp-2 text-left font-medium",children:null===(t=i.step)||void 0===t?void 0:t.description})]}),(0,n.jsx)(a.p,{className:"text-muted-foreground mt-2 size-4 shrink-0 transition-transform duration-200",weight:"bold"})]})}),(0,n.jsxs)(d.AccordionContent,{className:"relative text-base",children:[(0,n.jsx)(u.z,{variant:"ghost",className:"bg-indigo-4 hover:bg-indigo-5 absolute left-3.5 top-0 h-full w-1 p-0",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()}}),(0,n.jsx)(o.E.div,{viewport:{once:!0},transition:{type:"tween",duration:.5,delay:.5*r},className:(0,c.cn)("ml-8 flex flex-col rounded-md p-2.5 transition-all duration-200 ",b&&"bg-accent"),children:(0,n.jsx)(f.V,{message:i},i.id)})]})]})}function h(e){let{i:t,toolStatus:r,children:s,className:a,...i}=e;return(0,n.jsx)(o.E.div,{initial:"in_progress"===r?{opacity:0,scale:.5}:{opacity:1,scale:1},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{type:"tween",duration:.5,delay:.5*t},className:(0,c.cn)("bg-indigo-3 hover:bg-indigo-4 text-indigo-9 grid w-fit place-items-center rounded-full p-1.5",a),...i,children:s})}},76982:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(82933),s=r(36022),a=r(46228);function i(e){let{chatId:t}=function(){let e=(0,a.useParams)(),t=n.useMemo(()=>(null==e?void 0:e.chatId)?e.chatId:"",[null==e?void 0:e.chatId]),r=n.useMemo(()=>!!t,[t]);return n.useMemo(()=>({isOpen:r,chatId:t}),[r,t])}(),r=(0,n.useContext)(s.WebSocketContext);if(!r)throw Error("useChatWebSocket must be used within a WebSocketProvider");let{getWebSocket:i,sendMessage:l,sendAction:o}=r;return{ws:i(t,e),sendMessage:l,sendAction:o,chatId:t}}},13261:function(e,t,r){"use strict";r.d(t,{m:function(){return s}});var n=r(82933);function s(){let{timeout:e=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=n.useState(!1);return{isCopied:t,copyToClipboard:async t=>{var n;(null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText)&&t&&(await navigator.clipboard.writeText(t),r(!0),setTimeout(()=>{r(!1)},e))}}}},83594:function(e,t,r){"use strict";r.d(t,{q:function(){return n}});let n=["user_2OaN6KlxQfAH1D2WOr5MWB0qFBf","user_2PE3nYdPDmkkzfRi4XhVss7X0ca","user_2PMKgGvPrOXc44RXLqlDiJjxWzU","user_2XCv3SyU4rgakkYCg0zp1tl2Zk3"]},51348:function(e,t,r){"use strict";r.d(t,{M:function(){return s.Editor},cn:function(){return n.cn}}),r(95340),r(32961);var n=r(5455),s=r(76774)},5455:function(e,t,r){"use strict";r.d(t,{K:function(){return i},cn:function(){return a}});var n=r(85316),s=r(96133);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){if(function(e){try{return new URL(e),!0}catch(e){return!1}}(e))return e;try{if(e.includes(".")&&!e.includes(" "))return new URL("https://".concat(e)).toString()}catch(e){return null}}},76774:function(e,t,r){"use strict";r.r(t),r.d(t,{Editor:function(){return eu}});var n=r(9579),s=r(82933),a=r(47037),i=r(9022),l=r(49668);let o=(e,t)=>{let{chars:r,offset:n=0}=t;return e.state.doc.textBetween(Math.max(0,e.state.selection.from-r),e.state.selection.from-n,"\n")};var c=r(5455),d=r(23924),u=r(2507),m=r(19292),f=r(8591),x=r(612),p=r(24117),h=r(15780),g=r(97582),b=r(26548),v=r(99336);let j=[{name:"Default",color:"var(--black)"},{name:"Purple",color:"#9333EA"},{name:"Red",color:"#E00000"},{name:"Yellow",color:"#EAB308"},{name:"Blue",color:"#2563EB"},{name:"Green",color:"#008A00"},{name:"Orange",color:"#FFA500"},{name:"Pink",color:"#BA4081"},{name:"Gray",color:"#A8A29E"}],N=[{name:"Default",color:"var(--highlight-default)"},{name:"Purple",color:"var(--highlight-purple)"},{name:"Red",color:"var(--highlight-red)"},{name:"Yellow",color:"var(--highlight-yellow)"},{name:"Blue",color:"var(--highlight-blue)"},{name:"Green",color:"var(--highlight-green)"},{name:"Orange",color:"var(--highlight-orange)"},{name:"Pink",color:"var(--highlight-pink)"},{name:"Gray",color:"var(--highlight-gray)"}];function y(e){let{editor:t,isOpen:r,setIsOpen:s}=e,a=j.find(e=>{let{color:r}=e;return t.isActive("textStyle",{color:r})}),i=N.find(e=>{let{color:r}=e;return t.isActive("highlight",{color:r})});return(0,n.jsx)(g.fC,{open:r,children:(0,n.jsxs)("div",{className:"relative h-full",children:[(0,n.jsxs)(g.xz,{className:"text-editor-600 active:bg-editor-200 hover:bg-accent flex h-full items-center gap-1 p-2 text-sm font-medium",onClick:()=>s(!r),children:[(0,n.jsx)("span",{className:"rounded-sm px-1",style:{color:null==a?void 0:a.color,backgroundColor:null==i?void 0:i.color},children:"A"}),(0,n.jsx)(b.Z,{className:"size-4"})]}),(0,n.jsxs)(g.VY,{align:"start",className:"bg-editor-background border-border bg-background animate-in fade-in slide-in-from-top-1 z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border p-1 shadow-xl",children:[(0,n.jsx)("div",{className:"text-editor-500 my-1 px-2 text-sm",children:"Color"}),j.map((e,r)=>{let{name:a,color:i}=e;return(0,n.jsxs)("button",{onClick:()=>{t.commands.unsetColor(),"Default"!==a&&t.chain().focus().setColor(null!=i?i:"").run(),s(!1)},className:"text-editor-600 hover:bg-accent flex items-center justify-between rounded-sm px-2 py-1 text-sm",type:"button",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"border-editor-200 rounded-sm border px-1 py-px font-medium",style:{color:i},children:"A"}),(0,n.jsx)("span",{children:a})]}),t.isActive("textStyle",{color:i})&&(0,n.jsx)(v.Z,{className:"size-4"})]},r)}),(0,n.jsx)("div",{className:"text-editor-500 mb-1 mt-2 px-2 text-sm",children:"Background"}),N.map((e,r)=>{let{name:a,color:i}=e;return(0,n.jsxs)("button",{onClick:()=>{t.commands.unsetHighlight(),"Default"!==a&&t.commands.setHighlight({color:i}),s(!1)},className:"text-editor-600 hover:bg-accent flex items-center justify-between rounded-sm px-2 py-1 text-sm",type:"button",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"border-editor-200 rounded-sm border px-1 py-px font-medium",style:{backgroundColor:i},children:"A"}),(0,n.jsx)("span",{children:a})]}),t.isActive("highlight",{color:i})&&(0,n.jsx)(v.Z,{className:"size-4"})]},r)})]})]})})}var w=r(262);function k(e){let{editor:t,isOpen:r,setIsOpen:a}=e,i=s.useRef(null);return s.useEffect(()=>{var e;i.current&&(null===(e=i.current)||void 0===e||e.focus())}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{type:"button",className:"text-editor-600 active:bg-editor-200 hover:bg-accent flex h-full items-center space-x-2 px-3 py-1.5 text-sm font-medium",onClick:()=>{a(!r)},children:[(0,n.jsx)("p",{className:"text-base",children:"↗"}),(0,n.jsx)("p",{className:(0,c.cn)("decoration-editor-400 underline underline-offset-4",{"text-blue-500":t.isActive("link")}),children:"Link"})]}),r&&(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=e.currentTarget[0],n=(0,c.K)(r.value);n&&t.chain().focus().setLink({href:n}).run(),a(!1)},className:"border-editor-200 bg-background animate-in fade-in slide-in-from-top-1 fixed top-full z-[99999] mt-1 flex w-60 overflow-hidden rounded border p-1 shadow-xl",children:[(0,n.jsx)("input",{ref:i,type:"text",placeholder:"Paste a link",className:"bg-input mr-1 flex-1 p-1 text-sm outline-none",defaultValue:t.getAttributes("link").href||""}),t.getAttributes("link").href?(0,n.jsx)("button",{type:"button",className:"flex items-center rounded-sm p-1 text-red-600 transition-all hover:bg-red-100 dark:hover:bg-red-800",onClick:()=>{t.chain().focus().unsetLink().run(),a(!1)},children:(0,n.jsx)(w.Z,{className:"size-4"})}):(0,n.jsx)("button",{className:"text-editor-600 hover:bg-accent flex items-center rounded-sm p-1 transition-all",children:(0,n.jsx)(v.Z,{className:"size-4"})})]})]})}var C=r(69627),z=r(65070),A=r(17270),R=r(90422),S=r(59033),T=r(753),D=r(23056),Z=r(27445),M=r(11274);let L=s.createContext({completionApi:"/api/generate"}),I=()=>s.useContext(L);function E(e){var t;let{editor:r,isOpen:s,setIsOpen:a}=e,{completionApi:l}=I(),{complete:o,completion:c}=(0,i.GO)({id:"cognosys_editor",api:l,onResponse:e=>{if(429===e.status){M.toast.error("You have reached your request limit for the day."),C.ZP.track("Rate Limit Reached");return}},onFinish:(e,t)=>{},onError:e=>{M.toast.error(e.message)}}),d=[{name:"Text",icon:z.Z,command:()=>r.chain().focus().toggleNode("paragraph","paragraph").run(),isActive:()=>r.isActive("paragraph")&&!r.isActive("bulletList")&&!r.isActive("orderedList")},{name:"Heading 1",icon:A.Z,command:()=>r.chain().focus().toggleHeading({level:1}).run(),isActive:()=>r.isActive("heading",{level:1})},{name:"Heading 2",icon:R.Z,command:()=>r.chain().focus().toggleHeading({level:2}).run(),isActive:()=>r.isActive("heading",{level:2})},{name:"Heading 3",icon:S.Z,command:()=>r.chain().focus().toggleHeading({level:3}).run(),isActive:()=>r.isActive("heading",{level:3})},{name:"To-do List",icon:T.Z,command:()=>r.chain().focus().toggleTaskList().run(),isActive:()=>r.isActive("taskItem")},{name:"Bullet List",icon:D.Z,command:()=>r.chain().focus().toggleBulletList().run(),isActive:()=>r.isActive("bulletList")},{name:"Numbered List",icon:D.Z,command:()=>r.chain().focus().toggleOrderedList().run(),isActive:()=>r.isActive("orderedList")},{name:"Quote",icon:Z.Z,command:()=>r.chain().focus().toggleNode("paragraph","paragraph").toggleBlockquote().run(),isActive:()=>r.isActive("blockquote")},{name:"Code",icon:p.Z,command:()=>r.chain().focus().toggleCodeBlock().run(),isActive:()=>r.isActive("codeBlock")}],u=null!==(t=d.filter(e=>e.isActive()).pop())&&void 0!==t?t:{name:"Multiple"};return(0,n.jsx)(g.fC,{open:s,children:(0,n.jsxs)("div",{className:"relative h-full",children:[(0,n.jsxs)(g.xz,{className:"text-editor-600 hover:bg-accent active:bg-accent flex h-full items-center gap-1 whitespace-nowrap p-2 text-sm font-medium",onClick:()=>a(!s),children:[(0,n.jsx)("span",{children:null==u?void 0:u.name}),(0,n.jsx)(b.Z,{className:"size-4"})]}),(0,n.jsx)(g.VY,{align:"start",className:"border-editor-200 bg-background animate-in fade-in slide-in-from-top-1 z-[99999] my-1 flex max-h-80 w-48 flex-col overflow-hidden overflow-y-auto rounded border p-1 shadow-xl",children:d.map((e,t)=>(0,n.jsxs)("button",{onClick:()=>{e.command(),a(!1)},className:"text-editor-600 hover:bg-accent flex items-center justify-between rounded-sm px-2 py-1 text-sm",type:"button",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[" ",(0,n.jsx)(e.icon,{className:"size-3"})]}),(0,n.jsx)("span",{children:e.name})]}),u.name===e.name&&(0,n.jsx)(v.Z,{className:"size-4"})]},t))})]})})}function _(e){let t=[{name:"bold",isActive:()=>{var t,r;return null!==(r=null===(t=e.editor)||void 0===t?void 0:t.isActive("bold"))&&void 0!==r&&r},command:()=>{var t;return null===(t=e.editor)||void 0===t?void 0:t.chain().focus().toggleBold().run()},icon:u.Z},{name:"italic",isActive:()=>{var t,r;return null!==(r=null===(t=e.editor)||void 0===t?void 0:t.isActive("italic"))&&void 0!==r&&r},command:()=>{var t;return null===(t=e.editor)||void 0===t?void 0:t.chain().focus().toggleItalic().run()},icon:m.Z},{name:"underline",isActive:()=>{var t,r;return null!==(r=null===(t=e.editor)||void 0===t?void 0:t.isActive("underline"))&&void 0!==r&&r},command:()=>{var t;return null===(t=e.editor)||void 0===t?void 0:t.chain().focus().toggleUnderline().run()},icon:f.Z},{name:"strike",isActive:()=>{var t,r;return null!==(r=null===(t=e.editor)||void 0===t?void 0:t.isActive("strike"))&&void 0!==r&&r},command:()=>{var t;return null===(t=e.editor)||void 0===t?void 0:t.chain().focus().toggleStrike().run()},icon:x.Z},{name:"code",isActive:()=>{var t,r;return null!==(r=null===(t=e.editor)||void 0===t?void 0:t.isActive("code"))&&void 0!==r&&r},command:()=>{var t;return null===(t=e.editor)||void 0===t?void 0:t.chain().focus().toggleCode().run()},icon:p.Z}],r={...e,shouldShow:e=>{let{state:t,editor:r}=e,{selection:n}=t,{empty:s}=n;return!(r.isActive("image")||s||(0,d.EG)(n))},tippyOptions:{moveTransition:"transform 0.15s ease-out",onHidden:()=>{l(!1),c(!1),b(!1)}}},[i,l]=s.useState(!1),[o,c]=s.useState(!1),[g,b]=s.useState(!1);return e.editor?(0,n.jsxs)(a.NM,{...r,className:"divide-editor-200 border-border bg-background flex w-fit divide-x rounded border shadow-xl",children:[(0,n.jsx)(E,{editor:e.editor,isOpen:i,setIsOpen:()=>{l(!i),c(!1),b(!1)}}),(0,n.jsx)(k,{editor:e.editor,isOpen:g,setIsOpen:()=>{b(!g),c(!1),l(!1)}}),(0,n.jsx)("div",{className:"flex",children:t.map((e,t)=>(0,n.jsx)("button",{onClick:e.command,className:"text-editor-600 hover:bg-accent active:bg-accent p-2",type:"button",children:(0,n.jsx)(e.icon,{className:(0,h.cn)("size-4",{"text-blue-500":e.isActive()})})},t))}),(0,n.jsx)(y,{editor:e.editor,isOpen:o,setIsOpen:()=>{c(!o),l(!1),b(!1)}})]}):null}let P={type:"doc",content:[]};var B=r(64961),O=r(45955),U=r(45444),V=r(39813),F=r(31244),q=r(30726),H=r(41804),J=r(38930),Y=r(26595),G=r(49052),Q=r(22841),W=r(87493);let X=d.hj.create({name:"CustomKeymap",addCommands:()=>({selectTextWithinNodeBoundaries:()=>e=>{let{editor:t,commands:r}=e,{state:n}=t,{tr:s}=n,a=s.selection.$from.start(),i=s.selection.$to.end();return r.setTextSelection({from:a,to:i})}}),addKeyboardShortcuts:()=>({"Mod-a":e=>{let{editor:t}=e,{state:r}=t,{tr:n}=r,s=n.selection.from,a=n.selection.to,i=n.selection.$from.start(),l=n.selection.$to.end();return(s>i||a<l)&&(t.chain().selectTextWithinNodeBoundaries().run(),!0)}})});var $=r(27767),K=r(66497),ee=r(71202);function et(e){let{dimensions:t}=e;return(0,n.jsxs)("svg",{"aria-hidden":"true",className:"".concat(t||"size-4"," fill-editor-600 text-editor-200 animate-spin"),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]})}function er(e){let{items:t,command:r,editor:a,range:l}=e,[o,d]=s.useState(0),{completionApi:u}=I(),{complete:m,isLoading:f}=(0,i.GO)({id:"cognosys_editor",api:u,onResponse:e=>{if(429===e.status){M.toast.error("You have reached your request limit for the day."),C.ZP.track("Rate Limit Reached");return}},onFinish:(e,t)=>{},onError:e=>{M.toast.error(e.message)}}),x=s.useCallback(e=>{let n=t[e];C.ZP.track("Slash Command Used",{command:n.title}),r(n)},[m,f,r,a,t]);s.useEffect(()=>{let e=["ArrowUp","ArrowDown","Enter"],r=r=>{if(e.includes(r.key))return(r.preventDefault(),"ArrowUp"===r.key)?(d((o+t.length-1)%t.length),!0):"ArrowDown"===r.key?(d((o+1)%t.length),!0):"Enter"===r.key&&(x(o),!0)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t,o,d,x]),s.useEffect(()=>{d(0)},[t]);let p=s.useRef(null);return s.useLayoutEffect(()=>{let e=null==p?void 0:p.current,t=null==e?void 0:e.children[o];t&&e&&function(e,t){let r=e.offsetHeight,n=t?t.offsetHeight:0,s=t.offsetTop,a=s+n;s<e.scrollTop?e.scrollTop-=e.scrollTop-s+5:a>r+e.scrollTop&&(e.scrollTop+=a-r-e.scrollTop+5)}(e,t)},[o]),t.length>0?(0,n.jsx)("div",{id:"slash-command",ref:p,className:"border-border bg-background text-foreground z-50 h-auto max-h-[330px] w-72 overflow-y-auto rounded-md border px-1 py-2 shadow-md transition-all",children:t.map((e,t)=>(0,n.jsxs)("button",{className:(0,c.cn)("text-accent-foreground hover:bg-accent flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm",t===o?"bg-accent":"bg-transparent"),onClick:()=>x(t),children:[(0,n.jsx)("div",{className:"border-border bg-background size-10 flex items-center justify-center rounded-md border",children:"Continue writing"===e.title&&f?(0,n.jsx)(et,{}):e.icon}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.title}),(0,n.jsx)("p",{className:"text-muted-foreground text-xs",children:e.description})]})]},t))}):null}let en=d.hj.create({name:"slash-command",addOptions:()=>({suggestion:{char:"/",command:e=>{let{editor:t,range:r,props:n}=e;n.command({editor:t,range:r})}}}),addProseMirrorPlugins(){return[(0,$.ZP)({editor:this.editor,...this.options.suggestion})]}}).configure({suggestion:{items:function(e){let{query:t}=e;return[{title:"Text",description:"Just start typing with plain text.",searchTerms:["p","paragraph"],icon:(0,n.jsx)(z.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).toggleNode("paragraph","paragraph").run()}},{title:"To-do List",description:"Track tasks with a to-do list.",searchTerms:["todo","task","list","check","checkbox"],icon:(0,n.jsx)(T.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).toggleTaskList().run()}},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large"],icon:(0,n.jsx)(A.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).setNode("heading",{level:1}).run()}},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium"],icon:(0,n.jsx)(R.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).setNode("heading",{level:2}).run()}},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small"],icon:(0,n.jsx)(S.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).setNode("heading",{level:3}).run()}},{title:"Bullet List",description:"Create a simple bullet list.",searchTerms:["unordered","point"],icon:(0,n.jsx)(K.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).toggleBulletList().run()}},{title:"Numbered List",description:"Create a list with numbering.",searchTerms:["ordered"],icon:(0,n.jsx)(D.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;t.chain().focus().deleteRange(r).toggleOrderedList().run()}},{title:"Quote",description:"Capture a quote.",searchTerms:["blockquote"],icon:(0,n.jsx)(Z.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;return t.chain().focus().deleteRange(r).toggleNode("paragraph","paragraph").toggleBlockquote().run()}},{title:"Code",description:"Capture a code snippet.",searchTerms:["codeblock"],icon:(0,n.jsx)(p.Z,{size:18}),command:e=>{let{editor:t,range:r}=e;return t.chain().focus().deleteRange(r).toggleCodeBlock().run()}}].filter(e=>{if("string"==typeof t&&t.length>0){let r=t.toLowerCase();return e.title.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.searchTerms&&e.searchTerms.some(e=>e.includes(r))}return!0})},render:function(){let e=null,t=null;return{onStart:r=>{e=new a.M_(er,{props:r,editor:r.editor}),t=(0,ee.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate:r=>{null==e||e.updateProps(r),t&&t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown:r=>{var n;return"Escape"===r.event.key?(null==t||t[0].hide(),!0):null==e?void 0:null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(r)},onExit:()=>{null==t||t[0].destroy(),null==e||e.destroy()}}}}}),es=[Q.Z.configure({bulletList:{HTMLAttributes:{class:"list-disc list-outside leading-3 -mt-2"}},orderedList:{HTMLAttributes:{class:"list-decimal list-outside leading-3 -mt-2"}},listItem:{HTMLAttributes:{class:"leading-normal -mb-2"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-editor-700"}},codeBlock:{HTMLAttributes:{class:"rounded-sm bg-editor-100 p-5 font-mono font-medium text-editor-800"}},code:{HTMLAttributes:{class:"rounded-md bg-editor-200 px-1.5 py-1 font-mono font-medium text-editor-900",spellcheck:"false"}},horizontalRule:!1,dropcursor:{color:"#DBEAFE",width:4},gapcursor:!1}),U.Z.extend({addInputRules(){return[new d.VK({find:/^(?:---|—-|___\s|\*\*\*\s)$/,handler:e=>{let{state:t,range:r}=e,{tr:n}=t,s=r.from,a=r.to;n.insert(s-1,this.type.create({})).delete(n.mapping.map(s),n.mapping.map(a))}})]}}).configure({HTMLAttributes:{class:"mt-4 mb-6 border-t border-editor-300"}}),V.ZP.configure({HTMLAttributes:{class:"text-editor-400 underline underline-offset-[3px] hover:text-editor-600 transition-colors cursor-pointer"}}),F.Z.configure({placeholder:e=>{let{node:t}=e;return"heading"===t.type.name?"Heading ".concat(t.attrs.level):"Press '/' for commands..."},includeChildren:!0}),en,G.Z,J.Z,B.I,O.ZP.configure({multicolor:!0}),H.Z.configure({HTMLAttributes:{class:"not-prose pl-2"}}),q.ZP.configure({HTMLAttributes:{class:"flex items-start my-4"},nested:!0}),W.U,Y.ZP,X];var ea=r(57468);let ei=e=>{let{editor:t}=e,r=()=>{let e=document.querySelector(".ProseMirror-selectednode");if(e){let r=t.state.selection;t.commands.setImage({src:e.src,width:Number(e.style.width.replace("px","")),height:Number(e.style.height.replace("px",""))}),t.commands.setNodeSelection(r.from)}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ea.ZP,{target:document.querySelector(".ProseMirror-selectednode"),container:null,origin:!1,edge:!1,throttleDrag:0,keepRatio:!0,resizable:!0,throttleResize:0,onResize:e=>{let{target:t,width:r,height:n,delta:s}=e;s[0]&&(t.style.width="".concat(r,"px")),s[1]&&(t.style.height="".concat(n,"px"))},onResizeEnd:()=>{r()},scalable:!0,throttleScale:0,renderDirections:["w","e"],onScale:e=>{let{target:t,transform:r}=e;t.style.transform=r}})})},el=new(r(56118)).H$("upload-image");function eo(e,t,r){if(e.type.includes("image/")){if(e.size/1024/1024>20){M.toast.error("File size too big (max 20MB).");return}}else{M.toast.error("File type not supported.");return}let n={},s=t.state.tr;s.selection.empty||s.deleteSelection();let a=new FileReader;a.readAsDataURL(e),a.onload=()=>{s.setMeta(el,{add:{id:n,pos:r,src:a.result}}),t.dispatch(s)},ec(e).then(e=>{let{schema:r}=t.state,s=function(e,t){let r=el.getState(e).find(null,null,e=>e.id==t);return r.length?r[0].from:null}(t.state,n);if(null==s)return;let i="object"==typeof e?a.result:e,l=r.nodes.image.create({src:i}),o=t.state.tr.replaceWith(s,s,l).setMeta(el,{remove:{id:n}});t.dispatch(o)})}let ec=e=>new Promise(t=>{M.toast.promise(fetch("/api/upload",{method:"POST",headers:{"content-type":(null==e?void 0:e.type)||"application/octet-stream","x-vercel-filename":(null==e?void 0:e.name)||"image.png"},body:e}).then(async r=>{if(200===r.status){let{url:e}=await r.json(),n=new Image;n.src=e,n.onload=()=>{t(e)}}else if(401===r.status)throw t(e),Error("`BLOB_READ_WRITE_TOKEN` environment variable not found, reading image locally instead.");else throw Error("Error uploading image. Please try again.")}),{loading:"Uploading image...",success:"Image uploaded successfully.",error:e=>e.message})}),ed={attributes:{class:"prose-lg prose-editor dark:prose-invert prose-headings:font-title font-default focus:outline-none max-w-full"},handleDOMEvents:{keydown:(e,t)=>{if(["ArrowUp","ArrowDown","Enter"].includes(t.key)&&document.querySelector("#slash-command"))return!0}},handlePaste:(e,t)=>{if(t.clipboardData&&t.clipboardData.files&&t.clipboardData.files[0]){t.preventDefault();let r=t.clipboardData.files[0],n=e.state.selection.from;return eo(r,e,n),!0}return!1},handleDrop:(e,t,r,n)=>{if(!n&&t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files[0]){t.preventDefault();let r=t.dataTransfer.files[0],n=e.posAtCoords({left:t.clientX,top:t.clientY});return eo(r,e,(null==n?void 0:n.pos)||-1),!0}return!1}};function eu(e){let{completionApi:t="/api/generate",className:r="relative w-full border-border bg-background text-foreground sm:rounded-lg sm:border sm:shadow-lg",defaultValue:d=P,extensions:u=[],editorProps:m={},onUpdate:f=()=>{},onDebouncedUpdate:x=()=>{},debounceDuration:p=750,storageKey:h="editor__content",disableLocalStorage:g=!1,disabled:b}=e,[v,j]=function(e,t){let[r,n]=s.useState(t);return s.useEffect(()=>{let t=window.localStorage.getItem(e);t&&n(JSON.parse(t))},[e]),[r,t=>{n(t),window.localStorage.setItem(e,JSON.stringify(t))}]}(h,d),[N,y]=s.useState(!1),w=(0,l.y1)(async e=>{let{editor:t}=e,r=t.getJSON();x(t),g||j(r)},p),k=(0,a.jE)({extensions:[...es,...u],editorProps:{...ed,...m},onUpdate:e=>{e.editor.state.selection,o(e.editor,{chars:2}),f(e.editor),w(e)},autofocus:"end",editable:!b}),{complete:C,completion:z,isLoading:A,stop:R}=(0,i.GO)({id:"cognosys_editor",api:t}),S=s.useRef("");return s.useEffect(()=>{let e=z.slice(S.current.length);S.current=z,null==k||k.commands.insertContent(e)},[A,k,z]),s.useEffect(()=>{let e=e=>{("Escape"===e.key||e.metaKey&&"z"===e.key)&&(R(),"Escape"===e.key&&(null==k||k.commands.deleteRange({from:k.state.selection.from-z.length,to:k.state.selection.from})))},t=e=>{e.preventDefault(),e.stopPropagation(),R(),window.confirm("AI writing paused. Continue?")};return A?(document.addEventListener("keydown",e),window.addEventListener("mousedown",t)):(document.removeEventListener("keydown",e),window.removeEventListener("mousedown",t)),()=>{document.removeEventListener("keydown",e),window.removeEventListener("mousedown",t)}},[R,A,k,C,z.length]),s.useEffect(()=>{if(!k||N)return;let e=g?d:v;e&&(k.commands.setContent(e),y(!0))},[k,d,v,N,g]),(0,n.jsx)(L.Provider,{value:{completionApi:t},children:(0,n.jsxs)("div",{onClick:()=>{null==k||k.chain().focus().run()},className:(0,c.cn)(r),children:[k&&(0,n.jsx)(_,{editor:k}),(null==k?void 0:k.isActive("image"))&&(0,n.jsx)(ei,{editor:k}),(0,n.jsx)(a.kg,{editor:k})]})})}},95340:function(){},32961:function(){}}]);