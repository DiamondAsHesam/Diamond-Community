"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6721],{23924:function(e,t,n){n.d(t,{Cf:function(){return eM},DS:function(){return eE},EG:function(){return ef},Jo:function(){return en},K9:function(){return eP},ML:function(){return ex},NB:function(){return eA},Nl:function(){return f},Ov:function(){return eN},P1:function(){return v},QC:function(){return el},Rw:function(){return ek},S0:function(){return eC},VK:function(){return C},XP:function(){return er},b5:function(){return eo},d1:function(){return es},eE:function(){return Q},hj:function(){return $},nU:function(){return w},pr:function(){return eh},tI:function(){return ec},u9:function(){return ea},vc:function(){return eT},x2:function(){return eS},xh:function(){return K},zK:function(){return eO}});var r=n(56118),o=n(5567),i=n(24166),s=n(59555),a=n(40892),l=n(88144),c=n(80307);function d(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),filterTransaction:t.filterTransaction,plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class u{get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;var s=this;return[t,function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let l=n(...t)(i);return o.getMeta("preventDispatch")||s.hasCustomState||r.dispatch(o),l}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s=[],a=!!e,l=e||o.tr,c={...Object.fromEntries(Object.entries(n).map(e=>{let[n,r]=e;var o=this;return[n,function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];let a=o.buildProps(l,t),d=r(...n)(a);return s.push(d),c}]})),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),s.every(e=>!0===e))};return c}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,o=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)({...o,dispatch:void 0})}]})),chain:()=>this.createChain(r,!1)}}buildProps(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s={tr:e,editor:r,view:i,state:d({state:o,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)(s)}]}))}};return s}constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}}class p{on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let o=this.callbacks[e];return o&&o.forEach(e=>e.apply(this,n)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}constructor(){this.callbacks={}}}function f(e,t,n){return void 0===e.config[t]&&e.parent?f(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?f(e.parent,t,n):null}):e.config[t]}function h(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function m(e){let t=[],{nodeExtensions:n,markExtensions:r}=h(e),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=f(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[r,o]=e;t.push({type:n,name:r,attribute:{...i,...o}})})})})}),o.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=f(e,"addAttributes",n);r&&Object.entries(r()).forEach(n=>{let[r,o]=n,s={...i,...o};"function"==typeof(null==s?void 0:s.default)&&(s.default=s.default()),(null==s?void 0:s.isRequired)&&(null==s?void 0:s.default)===void 0&&delete s.default,t.push({type:e.name,name:r,attribute:s})})}),t}function g(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(!n[t]){n[t]=r;return}if("class"===t){let e=r?r.split(" "):[],o=n[t]?n[t].split(" "):[],i=e.filter(e=>!o.includes(e));n[t]=[...o,...i].join(" ")}else"style"===t?n[t]=[n[t],r].join("; "):n[t]=r}),n},{})}function y(e,t){return t.filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>v(e,t),{})}function b(e){return"function"==typeof e}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return b(e)?t?e.bind(t)(...r):e(...r):e}function k(e,t){return e.style?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let o=t.reduce((e,t)=>{var r;let o=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(t.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==o?e:{...e,[t.name]:o}},{});return{...r,...o}}}}function x(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return!("attrs"===t&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&null!=n}))}function M(e,t){return t.nodes[e]||t.marks[e]||null}function S(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}let O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,o,i)=>{var s,a;let l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=l.slice(0,Math.max(0,r-t))}),n};function E(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class C{constructor(e){this.find=e.find,this.handler=e.handler}}let T=(e,t)=>{if(E(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function A(e){var t;let{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let p=!1,f=O(c)+i;return s.forEach(e=>{if(p)return;let t=T(f,e.find);if(!t)return;let s=l.state.tr,c=d({state:l.state,transaction:s}),h={from:r-(t[0].length-i.length),to:o},{commands:m,chain:g,can:v}=new u({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:m,chain:g,can:v})&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:o,text:i}),l.dispatch(s),p=!0)}),p}class P{constructor(e){this.find=e.find,this.handler=e.handler}}let N=(e,t,n)=>{if(E(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]};class j{static resolve(e){let t=j.sort(j.flatten(e)),n=function(e){let t=e.filter((t,n)=>e.indexOf(t)!==n);return[...new Set(t)]}(t.map(e=>e.name));return n.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(n.map(e=>"'".concat(e,"'")).join(", "),"]. This can lead to issues.")),t}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=f(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{let n=f(e,"priority")||100,r=f(t,"priority")||100;return n>r?-1:n<r?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:M(t.name,this.schema)},r=f(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this,t=j.sort([...this.extensions].reverse()),n=[],o=[],s=t.map(t=>{let r={name:t.name,options:t.options,storage:t.storage,editor:e,type:M(t.name,this.schema)},s=[],a=f(t,"addKeyboardShortcuts",r),l={};if("mark"===t.type&&t.config.exitable&&(l.ArrowRight=()=>eT.handleExit({editor:e,mark:t})),a){let t=Object.fromEntries(Object.entries(a()).map(t=>{let[n,r]=t;return[n,()=>r({editor:e})]}));l={...l,...t}}let c=(0,i.h)(l);s.push(c);let d=f(t,"addInputRules",r);S(t,e.options.enableInputRules)&&d&&n.push(...d());let u=f(t,"addPasteRules",r);S(t,e.options.enablePasteRules)&&u&&o.push(...u());let p=f(t,"addProseMirrorPlugins",r);if(p){let e=p();s.push(...e)}return s}).flat();return[function(e){let{editor:t,rules:n}=e,o=new r.Sy({state:{init:()=>null,apply:(e,t)=>e.getMeta(o)||(e.selectionSet||e.docChanged?null:t)},props:{handleTextInput:(e,r,i,s)=>A({editor:t,from:r,to:i,text:s,rules:n,plugin:o}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:r}=e.state.selection;r&&A({editor:t,from:r.pos,to:r.pos,text:"",rules:n,plugin:o})}),!1)},handleKeyDown(e,r){if("Enter"!==r.key)return!1;let{$cursor:i}=e.state.selection;return!!i&&A({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:o})}},isInputRules:!0});return o}({editor:e,rules:n}),...function(e){let{editor:t,rules:n}=e,o=null,i=!1,s=!1,a=new ClipboardEvent("paste"),l=new DragEvent("drop");return n.map(e=>new r.Sy({view(e){let t=t=>{var n;o=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:(e,t)=>(s=o===e.dom.parentElement,l=t,!1),paste:(e,t)=>{var n;let r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=t,i=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,o)=>{let c=n[0],p="paste"===c.getMeta("uiEvent")&&!i,f="drop"===c.getMeta("uiEvent")&&!s;if(!p&&!f)return;let h=r.doc.content.findDiffStart(o.doc.content),m=r.doc.content.findDiffEnd(o.doc.content);if("number"!=typeof h||!m||h===m.b)return;let g=o.tr;if(function(e){let{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:d}=new u({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,o,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let u=Math.max(r,t),f=Math.min(o,t+e.content.size);N(e.textBetween(u-t,f-t,void 0,"￼"),i.find,s).forEach(e=>{if(void 0===e.index)return;let t=u+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},f=i.handler({state:n,range:o,match:e,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:a});p.push(f)})}),p.every(e=>null!==e)}({editor:t,state:d({state:o,transaction:g}),from:Math.max(h-1,0),to:m.b-1,rule:e,pasteEvent:a,dropEvent:l})&&g.steps.length)return l=new DragEvent("drop"),a=new ClipboardEvent("paste"),g}}))}({editor:e,rules:o}),...s]}get attributes(){return m(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=h(this.extensions);return Object.fromEntries(t.filter(e=>!!f(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:g(t.name,this.schema)},o=f(t,"addNodeView",r);return o?[t.name,(r,i,s,a)=>{let l=y(r,n);return o()({editor:e,node:r,getPos:s,decorations:a,HTMLAttributes:l,extension:t})}]:[]}))}constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=j.resolve(e),this.schema=function(e,t){var n;let r=m(e),{nodeExtensions:o,markExtensions:i}=h(e),a=null===(n=o.find(e=>f(e,"topNode")))||void 0===n?void 0:n.name,l=Object.fromEntries(o.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=x({...e.reduce((e,t)=>{let r=f(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:w(f(n,"content",i)),marks:w(f(n,"marks",i)),group:w(f(n,"group",i)),inline:w(f(n,"inline",i)),atom:w(f(n,"atom",i)),selectable:w(f(n,"selectable",i)),draggable:w(f(n,"draggable",i)),code:w(f(n,"code",i)),defining:w(f(n,"defining",i)),isolating:w(f(n,"isolating",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=w(f(n,"parseHTML",i));a&&(s.parseDOM=a.map(e=>k(e,o)));let l=f(n,"renderHTML",i);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:y(e,o)}));let c=f(n,"renderText",i);return c&&(s.toText=c),[n.name,s]})),c=Object.fromEntries(i.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},s=x({...e.reduce((e,t)=>{let r=f(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:w(f(n,"inclusive",i)),excludes:w(f(n,"excludes",i)),group:w(f(n,"group",i)),spanning:w(f(n,"spanning",i)),code:w(f(n,"code",i)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=w(f(n,"parseHTML",i));a&&(s.parseDOM=a.map(e=>k(e,o)));let l=f(n,"renderHTML",i);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:y(e,o)})),[n.name,s]}));return new s.V_({topNode:a,nodes:l,marks:c})}(this.extensions,t),this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:M(e.name,this.schema)};"mark"===e.type&&(null===(t=w(f(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);let r=f(e,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);let o=f(e,"onCreate",n);o&&this.editor.on("create",o);let i=f(e,"onUpdate",n);i&&this.editor.on("update",i);let s=f(e,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);let a=f(e,"onTransaction",n);a&&this.editor.on("transaction",a);let l=f(e,"onFocus",n);l&&this.editor.on("focus",l);let c=f(e,"onBlur",n);c&&this.editor.on("blur",c);let d=f(e,"onDestroy",n);d&&this.editor.on("destroy",d)})}}function B(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function I(e,t){let n={...e};return B(e)&&B(t)&&Object.keys(t).forEach(r=>{B(t[r])&&r in e?n[r]=I(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}class ${static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new $(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=I(this.options,e),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new $(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=w(f(t,"addOptions",{name:t.name})),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(f(this,"addOptions",{name:this.name}))),this.storage=w(f(this,"addStorage",{name:this.name,options:this.options}))||{}}}function R(e,t,n){let{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{},a="",l=!0;return e.nodesBetween(r,o,(e,n,c,d)=>{var u;let p=null==s?void 0:s[e.type.name];p?(e.isBlock&&!l&&(a+=i,l=!0),c&&(a+=p({node:e,pos:n,parent:c,index:d,range:t}))):e.isText?(a+=null===(u=null==e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n),l=!1):e.isBlock&&!l&&(a+=i,l=!0)}),a}function z(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}let D=$.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,s=Math.min(...i.map(e=>e.$from.pos));return R(r,{from:s,to:Math.max(...i.map(e=>e.$to.pos))},{textSerializers:z(n)})}}})]}});function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:E(t[r])?t[r].test(e[r]):t[r]===e[r])}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&L(e.attrs,n))}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;let o=H([...r.node.marks],t,n);if(!o)return;let i=r.index,s=e.start()+r.offset,a=i+1,l=s+r.node.nodeSize;for(H([...r.node.marks],t,n);i>0&&o.isInSet(e.parent.child(i-1).marks);)i-=1,s-=e.parent.child(i).nodeSize;for(;a<e.parent.childCount&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!H(e,t,n)}([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function V(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function K(e){return e instanceof r.Bs}function W(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;let n=r.Y1.atStart(e),o=r.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return o;let i=n.from,s=o.to;return"all"===t?r.Bs.create(e,W(0,i,s),W(e.content.size,i,s)):r.Bs.create(e,W(t,i,s),W(t,i,s))}function G(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let U=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&!/\S/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&U(r)}return e};function _(e){let t=new window.DOMParser().parseFromString("<body>".concat(e,"</body>"),"text/html").body;return U(t),U(t)}function q(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return s.HY.fromArray(e.map(e=>t.nodeFromJSON(e)));return t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),q("",t,n)}if("string"==typeof e){let r=s.aw.fromSchema(t);return n.slice?r.parseSlice(_(e),n.parseOptions).content:r.parse(_(e),n.parseOptions)}return q("",t,n)}let Y=e=>e.toString().startsWith("<");function Q(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function X(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:o,empty:i}=e.selection,s=t?g(t,e.schema):null,a=[];e.doc.nodesBetween(r,o,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);a.push({node:e,from:n,to:i})});let l=o-r,c=a.filter(e=>!s||s.name===e.node.type.name).filter(e=>L(e.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function Z(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function ee(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return q(e,t,{slice:!1,parseOptions:n})}function en(e,t){let n=V(t,e.schema),{from:r,to:o,empty:i}=e.selection,s=[];i?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,e=>{s.push(...e.marks)});let a=s.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function er(e,t){let n=new a.wx(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}function eo(e,t,n){let r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}function ei(e){return t=>(function(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}})(t.$from,e)}function es(e,t){let n=s.PW.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function ea(e,t){let n=Z("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){let n=g(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,e=>{i.push(e)});let s=i.reverse().find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}(e,t):"mark"===n?en(e,t):{}}function el(e){let{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,o)=>{let i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{let{from:e,to:t}=n[o];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(e=>{let{from:n,to:i}=e,s=t.slice(o).map(n,-1),a=t.slice(o).map(i),l=t.invert().map(s,-1),c=t.invert().map(a);r.push({oldRange:{from:l,to:c},newRange:{from:s,to:a}})})}),function(e){let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter(e=>{let r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>!t.filter((e,t)=>t!==n).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}(r)}function ec(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let o=F(n.resolve(e-1),t.type);o&&r.push({mark:t,...o})}):n.nodesBetween(e,t,(e,t)=>{e&&void 0!==e.nodeSize&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}function ed(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,o=e.find(e=>e.type===t&&e.name===r);return!!o&&o.attribute.keepOnSplit}))}function eu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:o}=e.selection,i=t?V(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>L(e.attrs,n,{strict:!1}));let s=0,a=[];if(o.forEach(t=>{let{$from:n,$to:r}=t,o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(o,t),r=Math.min(i,t+e.nodeSize);s+=r-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===s)return!1;let l=a.filter(e=>!i||i.name===e.mark.type.name).filter(e=>L(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=s}function ep(e,t){let{nodeExtensions:n}=h(t),r=n.find(t=>t.name===e);if(!r)return!1;let o={name:r.name,options:r.options,storage:r.storage},i=w(f(r,"group",o));return"string"==typeof i&&i.split(" ").includes("list")}function ef(e){return e instanceof r.qv}function eh(e,t,n){let r=e.state.doc.content.size,o=W(t,0,r),i=W(n,0,r),s=e.coordsAtPos(o),a=e.coordsAtPos(i,-1),l=Math.min(s.top,a.top),c=Math.max(s.bottom,a.bottom),d=Math.min(s.left,a.left),u=Math.max(s.right,a.right),p={top:l,bottom:c,left:d,right:u,width:u-d,height:c-l,x:d,y:l};return{...p,toJSON:()=>p}}function em(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let eg=(e,t)=>{let n=ei(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let o=e.doc.nodeAt(r);return!(n.node.type===(null==o?void 0:o.type)&&(0,a.Mn)(e.doc,n.pos))||(e.join(n.pos),!0)},ev=(e,t)=>{let n=ei(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let o=e.doc.nodeAt(r);return!(n.node.type===(null==o?void 0:o.type)&&(0,a.Mn)(e.doc,r))||(e.join(r),!0)};var ey=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null==window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:o}=n,{ranges:i}=o;return!r||(i.forEach(e=>{let{$from:r,$to:o}=e;t.doc.nodesBetween(r.pos,o.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:o}=n,i=r.resolve(o.map(t)),s=r.resolve(o.map(t+e.nodeSize)),l=i.blockRange(s);if(!l)return;let c=(0,a.k9)(l);if(e.type.isTextblock){let{defaultType:e}=i.parent.contentMatchAt(i.index());n.setNodeMarkup(l.start,e)}(c||0===c)&&n.lift(l,c)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.mD)(t,n)},cut:(e,t)=>n=>{let{editor:o,tr:i}=n,{state:s}=o,a=s.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);let l=i.mapping.map(t);return i.insert(l,a.content),i.setSelection(new r.Bs(i.doc.resolve(l-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,o=r.$anchor.node();if(o.content.size>0)return!1;let i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1)if(i.node(e).type===o.type){if(n){let n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:o}=t,i=g(e,r.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1)if(s.node(e).type===i){if(o){let t=s.before(e),r=s.after(e);n.delete(t,r).scrollIntoView()}return!0}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t,{from:o,to:i}=e;return r&&n.delete(o,i),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.NE)(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.uo)(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,state:i,dispatch:s}=n,a=V(e,i.schema),{doc:l,selection:c}=o,{$from:d,from:u,to:p}=c;if(s){let e=F(d,a,t);if(e&&e.from<=u&&e.to>=p){let t=r.Bs.create(l,e.from,e.to);o.setSelection(t)}}return!0}},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:o,tr:i,dispatch:s}=n;t={scrollIntoView:!0,...t};let a=()=>{G()&&o.dom.focus(),requestAnimationFrame(()=>{!r.isDestroyed&&(o.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(o.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!K(r.state.selection))return a(),!0;let l=J(i.doc,e)||r.state.selection,c=r.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0}},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>n=>{let{tr:r,commands:o}=n;return o.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>o=>{let{tr:i,dispatch:s,editor:l}=o;if(s){n={parseOptions:{},updateSelection:!0,...n};let o=q(t,l.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===o.toString())return!0;let{from:s,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},d=!0,u=!0;if((Y(o)?o:[o]).forEach(e=>{e.check(),d=!!d&&e.isText&&0===e.marks.length,u=!!u&&e.isBlock}),s===c&&u){let{parent:e}=i.doc.resolve(s);!e.isTextblock||e.type.spec.code||e.childCount||(s-=1,c+=1)}d?Array.isArray(t)?i.insertText(t.map(e=>e.text||"").join(""),s,c):"object"==typeof t&&t&&t.text?i.insertText(t.text,s,c):i.insertText(t,s,c):i.replaceWith(s,c,o),n.updateSelection&&function(e,t,n){let o=e.steps.length-1;if(o<t)return;let i=e.steps[o];if(!(i instanceof a.Pu||i instanceof a.FC))return;let s=e.mapping.maps[o],l=0;s.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(r.Y1.near(e.doc.resolve(l),-1))}(i,i.steps.length-1,0)}return!0},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.MI)(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.Ig)(t,n)},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.al)(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.Y_)(t,n)},joinItemBackward:()=>e=>{let{tr:t,state:n,dispatch:r}=e;try{let e=(0,a.GJ)(n.doc,n.selection.$from.pos,-1);if(null==e)return!1;return t.join(e,2),r&&r(t),!0}catch(e){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=(0,a.GJ)(t.doc,t.selection.$from.pos,1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:o,dispatch:i}=t,s=(function(e){let t,n,r,o;let i=e.split(/-(?!$)/),s=i[i.length-1];"Space"===s&&(s=" ");for(let e=0;e<i.length-1;e+=1){let s=i[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))G()||Q()?o=!0:n=!0;else throw Error("Unrecognized modifier name: ".concat(s))}return t&&(s="Alt-".concat(s)),n&&(s="Ctrl-".concat(s)),o&&(s="Meta-".concat(s)),r&&(s="Shift-".concat(s)),s})(e).split(/-(?!$)/),a=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,l))});return null==c||c.steps.forEach(e=>{let t=e.map(o.mapping);t&&i&&o.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n,i=g(e,r.schema);return!!X(r,i,t)&&(0,l.xb)(r,o)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.X0)(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t,o=g(e,n.schema);return(0,c.IB)(o)(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.QK)(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:o,dispatch:i}=n,s=null,a=null,l=Z("string"==typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(s=g(e,o.schema)),"mark"===l&&(a=V(e,o.schema)),i&&r.selection.ranges.forEach(e=>{o.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{s&&s===e.type&&r.setNodeMarkup(n,void 0,ee(e.attrs,t)),a&&e.marks.length&&e.marks.forEach(o=>{a===o.type&&r.addMark(n,n+e.nodeSize,a.create(ee(o.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,commands:n}=e;return n.setTextSelection({from:0,to:t.doc.content.size})},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return(0,l._M)(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.o)(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.N0)(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.nw)(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.U9)(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{tr:o,editor:i,dispatch:s}=r,{doc:a}=o,l=et(e,i.schema,n);return s&&o.replaceWith(0,a.content.size,l).setMeta("preventUpdate",!t),!0}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,{selection:s}=r,{empty:a,ranges:l}=s,c=V(e,o.schema);if(i){if(a){let e=en(o,c);r.addStoredMark(c.create({...e,...t}))}else l.forEach(e=>{let n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(e,o)=>{let s=Math.max(o,n),a=Math.min(o+e.nodeSize,i);e.marks.find(e=>e.type===c)?e.marks.forEach(e=>{c===e.type&&r.addMark(s,a,c.create({...e.attrs,...t}))}):r.addMark(s,a,c.create(t))})})}return function(e,t,n){var r;let{selection:o}=t,i=null;if(K(o)&&(i=o.$cursor),i){let t=null!==(r=e.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:s}=o;return s.some(t=>{let{$from:r,$to:o}=t,i=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,o.pos,(e,t,r)=>{if(i)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),o=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));i=t&&o}return!i}),i})}(o,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o,chain:i}=n,s=g(e,r.schema);return s.isTextblock?i().command(e=>{let{commands:n}=e;return!!(0,l.uJ)(s,t)(r)||n.clearNodes()}).command(e=>{let{state:n}=e;return(0,l.uJ)(s,t)(n,o)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:o}=t;if(o){let{doc:t}=n,o=W(e,0,t.content.size),i=r.qv.create(t,o);n.setSelection(i)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:o}=t;if(o){let{doc:t}=n,{from:o,to:i}="number"==typeof e?{from:e,to:e}:e,s=r.Bs.atStart(t).from,a=r.Bs.atEnd(t).to,l=W(o,s,a),c=W(i,s,a),d=r.Bs.create(t,l,c);n.setSelection(d)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t,o=g(e,n.schema);return(0,c.bw)(o)(n,r)},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:o,dispatch:i,editor:s}=t,{selection:l,doc:c}=n,{$from:d,$to:u}=l,p=ed(s.extensionManager.attributes,d.node().type.name,d.node().attrs);if(l instanceof r.qv&&l.node.isBlock)return!!(d.parentOffset&&(0,a.Ax)(c,d.pos))&&(i&&(e&&em(o,s.extensionManager.splittableMarks),n.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;if(i){let t=u.parentOffset===u.parent.content.size;l instanceof r.Bs&&n.deleteSelection();let i=0===d.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(d.node(-1).contentMatchAt(d.indexAfter(-1))),c=t&&i?[{type:i,attrs:p}]:void 0,f=(0,a.Ax)(n.doc,n.mapping.map(d.pos),1,c);if(!c&&!f&&(0,a.Ax)(n.doc,n.mapping.map(d.pos),1,i?[{type:i}]:void 0)&&(f=!0,c=i?[{type:i,attrs:p}]:void 0),f&&(n.split(n.mapping.map(d.pos),1,c),i&&!t&&!d.parentOffset&&d.parent.type!==i)){let e=n.mapping.map(d.before()),t=n.doc.resolve(e);d.node(-1).canReplaceWith(t.index(),t.index()+1,i)&&n.setNodeMarkup(n.mapping.map(d.before()),i)}e&&em(o,s.extensionManager.splittableMarks),n.scrollIntoView()}return!0}},splitListItem:e=>t=>{var n;let{tr:o,state:i,dispatch:l,editor:c}=t,d=g(e,i.schema),{$from:u,$to:p}=i.selection,f=i.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(p))return!1;let h=u.node(-1);if(h.type!==d)return!1;let m=c.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==d||u.index(-2)!==u.node(-2).childCount-1)return!1;if(l){let e=s.HY.empty,t=u.index(-1)?1:u.index(-2)?2:3;for(let n=u.depth-t;n>=u.depth-3;n-=1)e=s.HY.from(u.node(n).copy(e));let i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,a=ed(m,u.node().type.name,u.node().attrs),l=(null===(n=d.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(a))||void 0;e=e.append(s.HY.from(d.createAndFill(null,l)||void 0));let c=u.before(u.depth-(t-1));o.replace(c,u.after(-i),new s.p2(e,4-t,0));let p=-1;o.doc.nodesBetween(c,o.doc.content.size,(e,t)=>{if(p>-1)return!1;e.isTextblock&&0===e.content.size&&(p=t+1)}),p>-1&&o.setSelection(r.Bs.near(o.doc.resolve(p))),o.scrollIntoView()}return!0}let v=p.pos===u.end()?h.contentMatchAt(0).defaultType:null,y=ed(m,h.type.name,h.attrs),b=ed(m,u.node().type.name,u.node().attrs);if(o.delete(u.pos,p.pos),!(0,a.Ax)(o.doc,u.pos,2))return!1;if(l){let{selection:e,storedMarks:t}=i,{splittableMarks:n}=c.extensionManager,r=t||e.$to.parentOffset&&e.$from.marks();if(o.split(u.pos,2,v?[{type:d,attrs:y},{type:v,attrs:b}]:[{type:d,attrs:y}]).scrollIntoView(),!r||!l)return!0;let s=r.filter(e=>n.includes(e.type.name));o.ensureMarks(s)}return!0},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o=>{let{editor:i,tr:s,state:a,dispatch:l,chain:c,commands:d,can:u}=o,{extensions:p,splittableMarks:f}=i.extensionManager,h=g(e,a.schema),m=g(t,a.schema),{selection:v,storedMarks:y}=a,{$from:b,$to:w}=v,k=b.blockRange(w),x=y||v.$to.parentOffset&&v.$from.marks();if(!k)return!1;let M=ei(e=>ep(e.type.name,p))(v);if(k.depth>=1&&M&&k.depth-M.depth<=1){if(M.node.type===h)return d.liftListItem(m);if(ep(M.node.type.name,p)&&h.validContent(M.node.content)&&l)return c().command(()=>(s.setNodeMarkup(M.pos,h),!0)).command(()=>eg(s,h)).command(()=>ev(s,h)).run()}return n&&x&&l?c().command(()=>{let e=u().wrapInList(h,r),t=x.filter(e=>f.includes(e.type.name));return s.ensureMarks(t),!!e||d.clearNodes()}).wrapInList(h,r).command(()=>eg(s,h)).command(()=>ev(s,h)).run():c().command(()=>!!u().wrapInList(h,r)||d.clearNodes()).wrapInList(h,r).command(()=>eg(s,h)).command(()=>ev(s,h)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r,{extendEmptyMarkRange:s=!1}=n,a=V(e,o.schema);return eu(o,a,t)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:o,commands:i}=r,s=g(e,o.schema),a=g(t,o.schema);return X(o,s,n)?i.setNode(a):i.setNode(s,n)}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:o}=n,i=g(e,r.schema);return X(r,i,t)?o.lift(i):o.wrapIn(i,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let e=0;e<r.length;e+=1){let o;let i=r[e];if(i.spec.isInputRules&&(o=i.getState(t))){if(n){let e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){let n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:o,ranges:i}=r;return!!o||(n&&i.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0)},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:o,state:i,dispatch:s}=n,{extendEmptyMarkRange:a=!1}=t,{selection:l}=o,c=V(e,i.schema),{$from:d,empty:u,ranges:p}=l;if(!s)return!0;if(u&&a){let{from:e,to:t}=l,n=null===(r=d.marks().find(e=>e.type===c))||void 0===r?void 0:r.attrs,i=F(d,c,n);i&&(e=i.from,t=i.to),o.removeMark(e,t,c)}else p.forEach(e=>{o.removeMark(e.$from.pos,e.$to.pos,c)});return o.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:o,dispatch:i}=n,s=null,a=null,l=Z("string"==typeof e?e:e.name,o.schema);return!!l&&("node"===l&&(s=g(e,o.schema)),"mark"===l&&(a=V(e,o.schema)),i&&r.selection.ranges.forEach(e=>{let n=e.$from.pos,i=e.$to.pos;o.doc.nodesBetween(n,i,(e,o)=>{s&&s===e.type&&r.setNodeMarkup(o,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach(s=>{if(a===s.type){let l=Math.max(o,n),c=Math.min(o+e.nodeSize,i);r.addMark(l,c,a.create({...s.attrs,...t}))}})})}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n,i=g(e,r.schema);return(0,l.ym)(i,t)(r,o)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:o}=n,i=g(e,r.schema);return(0,c.KI)(i,t)(r,o)}}});let eb=$.create({name:"commands",addCommands:()=>({...ey})}),ew=$.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}});var ek=Object.freeze({__proto__:null,ClipboardTextSerializer:D,Commands:eb,Editable:ew,FocusEvents:$.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new r.Sy({key:new r.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Keymap:$.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e,{selection:o,doc:i}=n,{empty:s,$anchor:a}=o,{pos:l,parent:c}=a,d=a.parent.isTextblock?n.doc.resolve(l-1):a,u=d.parent.type.spec.isolating,p=a.pos-a.parentOffset,f=u&&1===d.parent.childCount?p===a.pos:r.Y1.atStart(i).from===l;return!!s&&!!f&&!!c.type.isTextblock&&!c.textContent.length&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},o={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return G()||Q()?i:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some(e=>e.docChanged)&&!t.doc.eq(n.doc)))return;let{empty:o,from:i,to:s}=t.selection,a=r.Y1.atStart(t.doc).from,l=r.Y1.atEnd(t.doc).to;if(o||!(i===a&&s===l)||0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;let c=n.tr,p=d({state:n,transaction:c}),{commands:f}=new u({editor:this.editor,state:p});if(f.clearNodes(),c.steps.length)return c}})]}}),Tabindex:$.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}})});class ex extends p{get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){let r=document.querySelector("style[data-tiptap-style".concat(n?"-".concat(n):"","]"));if(null!==r)return r;let o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style".concat(n?"-".concat(n):""),""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=b(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e){if(this.isDestroyed)return;let t="string"==typeof e?"".concat(e,"$"):e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter(e=>!e.key.startsWith(t))});this.view.updateState(n)}createExtensionManager(){let e=[...this.options.enableCoreExtensions?Object.values(ek):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new j(e,this)}createCommandManager(){this.commandManager=new u({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e=et(this.options.content,this.schema,this.options.parseOptions),t=J(e,this.options.autofocus);this.view=new o.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:e,selection:t||void 0})});let n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let r=e.getMeta("focus"),o=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return ea(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return X(e,null,n)||eu(e,null,n);let r=Z(t,e.schema);return"node"===r?X(e,t,n):"mark"===r&&eu(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return es(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){let n={from:0,to:e.content.size};return R(e,n,t)}(this.state.doc,{blockSeparator:t,textSerializers:{...z(this.schema),...n}})}get isEmpty(){return function(e){var t;let n=null===(t=e.type.createAndFill())||void 0===t?void 0:t.toJSON(),r=e.toJSON();return JSON.stringify(n)===JSON.stringify(r)}(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}}function eM(e){return new C({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,i=w(e.getAttributes,void 0,o);if(!1===i||null===i)return null;let{tr:s}=n,a=o[o.length-1],l=o[0];if(a){let t=l.search(/\S/),o=r.from+l.indexOf(a),c=o+a.length;if(ec(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>o).length)return null;c<r.to&&s.delete(c,r.to),o>r.from&&s.delete(r.from+t,o);let d=r.from+t+a.length;s.addMark(r.from+t,d,e.type.create(i||{})),s.removeStoredMark(e.type)}}})}function eS(e){return new C({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,i=w(e.getAttributes,void 0,o)||{},{tr:s}=n,a=r.from,l=r.to,c=e.type.create(i);if(o[1]){let e=a+o[0].lastIndexOf(o[1]);e>l?e=l:l=e+o[1].length;let t=o[0][o[0].length-1];s.insertText(t,a+o[0].length-1),s.replaceWith(e,l,c)}else o[0]&&s.insert(a-1,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(l));s.scrollIntoView()}})}function eO(e){return new C({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,i=n.doc.resolve(r.from),s=w(e.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}})}function eE(e){return new C({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,i=e.replace,s=r.from,a=r.to;if(o[1]){let e=o[0].lastIndexOf(o[1]);i+=o[0].slice(e+o[1].length);let t=(s+=e)-a;t>0&&(i=o[0].slice(e-t,e)+i,s=a)}n.tr.insertText(i,s,a)}})}function eC(e){return new C({find:e.find,handler:t=>{let{state:n,range:r,match:o,chain:i}=t,s=w(e.getAttributes,void 0,o)||{},l=n.tr.delete(r.from,r.to),c=l.doc.resolve(r.from).blockRange(),d=c&&(0,a.nd)(c,e.type,s);if(!d)return null;if(l.wrap(c,d),e.keepMarks&&e.editor){let{selection:t,storedMarks:r}=n,{splittableMarks:o}=e.editor.extensionManager,i=r||t.$to.parentOffset&&t.$from.marks();if(i){let e=i.filter(e=>o.includes(e.type.name));l.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,s).run()}let u=l.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&(0,a.Mn)(l.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(o,u))&&l.join(r.from-1)}})}class eT{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new eT(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=I(this.options,e),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new eT(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=w(f(t,"addOptions",{name:t.name})),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e,{tr:r}=t.state,o=t.state.selection.$from;if(o.pos===o.end()){let e=o.marks();if(!e.find(e=>(null==e?void 0:e.type.name)===n.name))return!1;let i=e.find(e=>(null==e?void 0:e.type.name)===n.name);return i&&r.removeStoredMark(i),r.insertText(" ",o.pos),t.view.dispatch(r),!0}return!1}constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(f(this,"addOptions",{name:this.name}))),this.storage=w(f(this,"addStorage",{name:this.name,options:this.options}))||{}}}class eA{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new eA(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=I(this.options,e),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new eA(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=w(f(t,"addOptions",{name:t.name})),t.storage=w(f(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(f(this,"addOptions",{name:this.name}))),this.storage=w(f(this,"addStorage",{name:this.name,options:this.options}))||{}}}function eP(e){return new P({find:e.find,handler:t=>{let{state:n,range:r,match:o,pasteEvent:i}=t,s=w(e.getAttributes,void 0,o,i);if(!1===s||null===s)return null;let{tr:a}=n,l=o[o.length-1],c=o[0],d=r.to;if(l){let t=c.search(/\S/),o=r.from+c.indexOf(l),i=o+l.length;if(ec(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>o).length)return null;i<r.to&&a.delete(i,r.to),o>r.from&&a.delete(r.from+t,o),d=r.from+t+l.length,a.addMark(r.from+t,d,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}function eN(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}}}]);